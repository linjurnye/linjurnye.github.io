<?php
 goto zU0mn; rrgen: EDRCn: goto iUPdl; jAx8R: $db_username = trim($_POST["\x75\x73\145\x72\x6e\x61\155\x65"]); goto sP71d; o_Ycx: define("\111\x41\137\x49\116\123\x54\101\114\114\137\x52\x4f\117\124", str_replace("\134", "\57", dirname(__FILE__))); goto UXmH4; E12D9: $ret["\166\145\x72\163\x69\157\156"]["\156\x61\x6d\145"] = "\x50\110\120\347\x89\x88\346\234\xac"; goto hrwOE; A7okN: $data = we7_request_api(API_GET_CHUNK_PACKAGE, $post); goto Ov6Re; ig24A: exit(we7_error(400, $chunk_num)); goto rrgen; LUi_J: nkoY1: goto jUrm0; aul8J: $code = trim($_GET["\143\157\144\145"]); goto w4EGy; tEz8f: $dbfile = IA_INSTALL_ROOT . "\57\x64\141\x74\141\x2f\x64\x62\x2e\160\x68\x70"; goto hxMVG; WyscI: $actions = array("\157\x61\165\x74\150", "\145\x6e\166\x69\162\157\x6e\x6d\145\156\x74", "\151\156\x73\164\141\154\x6c", "\143\x68\165\156\153\x74\x6f\164\141\154", "\x64\157\167\x6e\x6c\157\141\144", "\151\x6e\163\164\141\154\154", "\162\x65\x67\151\163\164\145\162\137\143\x61\x6c\x6c\x62\141\143\153", "\x6c\x6f\147\151\x6e"); goto wvBRs; Y2IW1: ob_start(); goto o_Ycx; xrcjL: $finished = true; goto HM1DS; fti_T: i7dRK: goto Y7mgD; dsprc: $chunk_num = max(1, intval($_POST["\x63\x68\165\x6e\153"])); goto DtLoV; BOxZc: function we7_request_api($url, $post = array()) { goto sT9Gu; rLfpl: return array("\x65\x72\x72\x6f\162" => 401); goto iE_9H; s2CYE: mxzZo: goto OXl1z; sT9Gu: $response = we7_http_request($url, $post); goto G1DD0; lQJJE: return array("\145\x72\x72\x6f\x72" => $response["\143\157\x6e\164\145\x6e\x74"]); goto Y1UzS; BQ9xZ: return $result; goto s2CYE; YOnhZ: $result = json_decode($response["\x63\157\x6e\164\x65\156\x74"], true); goto XVBHn; ZyQON: return $response["\143\157\x6e\x74\145\156\x74"]; goto wBkvM; XVBHn: if (is_array($result)) { goto mgx99; } goto ZyQON; G1DD0: if (!($response["\x63\x6f\x64\x65"] == 401)) { goto wl_ab; } goto rLfpl; iE_9H: wl_ab: goto zZ7Po; L0SZl: mgx99: goto BQ9xZ; wBkvM: goto mxzZo; goto L0SZl; zZ7Po: if (!($response["\x63\157\x64\145"] != 200 || isset($response["\145\162\x72\x6e\x6f"]))) { goto TITVf; } goto lQJJE; Y1UzS: TITVf: goto YOnhZ; OXl1z: } goto yIdkc; hxMVG: if (file_exists(IA_INSTALL_ROOT . "\57\151\x6e\144\x65\x78\56\x70\x68\160") && is_dir(IA_INSTALL_ROOT . "\57\167\x65\x62") && file_exists($verfile) && file_exists($dbfile)) { goto zCQY7; } goto Qnyuj; o3YHG: dHG7U: goto oFeCv; MJTvz: kODUz: goto tHWjq; KR4fg: define("\x41\x50\111\137\x47\105\124\x5f\120\101\x43\x4b\101\107\x45\x5f\115\x44\65\137\x41\116\104\137\x43\x48\125\x4e\113\124\117\x54\x41\x4c", API_HOST . "\x2f\x75\x74\x69\154\x2f\160\141\x63\153\141\147\x65\57\151\x6e\x73\164\141\x6c\x6c"); goto gLXKN; ufx3b: if (!($action == "\x65\x6e\x76\151\x72\x6f\x6e\x6d\x65\156\164")) { goto EqKV4; } goto xg5Zb; PF9gC: exit(we7_error(420, $database_result)); goto l7Ddp; g84iz: AV0V_: goto zVJrl; L_xtL: if ($data["\145\x72\x72\157\x72"] == 401) { goto z3WKr; } goto fdiZl; DpFE1: $i++; goto eGu4K; mGPDf: if ($ret["\x72\157\157\164"]["\x6f\153"]) { goto eGRte; } goto z4A39; PIc2z: LkkMS: goto eWFyY; I7PqG: if (!($register_site_result !== true)) { goto jX7_t; } goto TIEIp; DtON2: $sitename = trim($_POST["\x73\x69\164\145\156\x61\155\x65"]); goto Hekls; Qnyuj: exit(we7_error(421, "\345\xae\x89\xe8\xa3\205\345\214\205\344\270\x8d\345\xae\x8c\346\x95\264\56")); goto fME66; onlef: error_reporting(0); goto dfJXg; eVSWa: if (!($username != "\x61\x64\155\151\156" || $password != "\x31\x32\x33\64\65\66")) { goto bYFnm; } goto TIjG6; qEC35: function local_run($sql, $link, $db) { goto wXG87; NfCfx: foreach ($ret as $query) { goto pAZF1; LN30k: if (!$query) { goto c414z; } goto f8mjn; fe2JP: c414z: goto Gmk4P; pAZF1: $query = trim($query); goto LN30k; QF9NH: echo $errorInfo[0] . "\x3a\x20" . $errorInfo[2] . "\x3c\x62\162\40\57\x3e"; goto YHeSt; f8mjn: $link->exec($query); goto h06zi; YHeSt: exit($query); goto EGX92; Gmk4P: RfCVk: goto l2njI; sD7fp: $errorInfo = $link->errorInfo(); goto QF9NH; EGX92: d036t: goto fe2JP; h06zi: if (!($link->errorCode() != "\60\60\x30\x30\x30")) { goto d036t; } goto sD7fp; l2njI: } goto IKodh; wXG87: if (!(!isset($sql) || empty($sql))) { goto EmWE6; } goto oO89f; oO89f: return; goto pRZF8; IKodh: Mi1yr: goto kuN4J; SUge8: foreach (explode("\73\12", trim($sql)) as $query) { goto hCPSu; hCPSu: $ret[$num] = ''; goto vOQ_l; PIWXl: pJpt5: goto ZM9eI; mN3GS: rXD2l: goto ccTjA; vOQ_l: $queries = explode("\12", trim($query)); goto bC9N6; ZM9eI: $num++; goto mN3GS; bC9N6: foreach ($queries as $query) { $ret[$num] .= isset($query[0]) && $query[0] == "\43" || isset($query[1]) && isset($query[1]) && $query[0] . $query[1] == "\55\x2d" ? '' : $query; E_Hz2: } goto PIWXl; ccTjA: } goto i4B92; C3nLp: $ret = array(); goto ksJbJ; pRZF8: EmWE6: goto AUlaB; jIBWf: unset($sql); goto NfCfx; AUlaB: $sql = str_replace("\15", "\xa", str_replace("\x20\151\155\x73\137", "\x20" . $db["\160\162\145\146\151\x78"], $sql)); goto hPJ6L; hPJ6L: $sql = str_replace("\15", "\xa", str_replace("\40\140\x69\x6d\163\137", "\x20\x60" . $db["\160\x72\145\x66\151\170"], $sql)); goto C3nLp; i4B92: MFW9v: goto jIBWf; ksJbJ: $num = 0; goto SUge8; kuN4J: } goto H1tm4; S1nOw: Fb7JK: goto MtxpJ; ah8I_: $register_site_result = we7_register_site(); goto I7PqG; egPkE: $ret["\x72\x6f\157\x74"]["\157\153"] = local_writeable(IA_INSTALL_ROOT); goto mGPDf; egDaA: $ret["\146\x6f\160\x65\x6e"]["\x72\x65\163\165\x6c\x74"] = "\xe4\270\215\xe6\x94\xaf\346\214\x81\x66\x6f\160\x65\x6e"; goto l63X0; ozI73: if (!(!empty($ret["\141\x73\x70\137\x74\x61\x67\x73"]["\x6f\153"]) && strtolower($ret["\x61\163\x70\137\164\141\147\163"]["\157\x6b"]) == "\157\x6e")) { goto eNPrK; } goto FOfT1; Mt0o7: $forward = $data["\x75\162\154"]; goto zt_hj; xozYN: $db_prefix = trim($_POST["\160\162\145\x66\x69\170"]); goto u_rEe; xPBk_: exit(we7_error(400, $chunk_num)); goto zDjsc; sR9pQ: $callback = urlencode($url); goto cvgRn; MjuYU: function local_salt($length = 8) { goto Fcoh4; p6Z5D: return $result; goto ttuqm; Fcoh4: $strs = "\x41\102\103\x44\x45\106\x47\110\111\x4a\x4b\114\115\x4e\117\x50\121\122\x53\x54\x55\x56\127\x58\131\x5a\141\x62\143\x64\145\x66\147\150\151\x6a\153\154\156\155\x6f\160\161\162\163\164\165\x76\167\170\171\172\x30\61\x32\x33\64\65\66\x37\70\71"; goto n4BD1; n4BD1: $result = substr(str_shuffle($strs), mt_rand(0, strlen($strs) - ($length + 1)), $length); goto p6Z5D; ttuqm: } goto gigbH; JhItE: if (!(!empty($auth["\165\x72\x6c"]) && $auth["\165\x72\x6c"] == $siteroot)) { goto tkjuf; } goto x2OUC; y97b0: exit; goto h95jA; Q624W: HDt3U: goto RcxdP; gba4j: if (!empty($chunk_total)) { goto JmbRd; } goto qcKtW; RcxdP: PnNx3: goto eVSWa; YI3eK: function we7_db() { goto s2np1; Xlz2L: $support_innodb = false; goto kVwQq; ym3_c: $dat = (require $dbfile); goto vf0C2; xBX90: foreach ($all_engines as $engine) { goto pluEK; pluEK: if (!(strtolower($engine["\105\x6e\x67\x69\156\x65"]) == "\151\156\x6e\157\144\x62" && in_array(strtolower($engine["\x53\x75\x70\x70\x6f\x72\164"]), array("\x64\x65\x66\x61\x75\154\x74", "\x79\145\x73")))) { goto gbYds; } goto BAKVx; cm08O: gbYds: goto FUyTc; BAKVx: $support_innodb = true; goto cm08O; FUyTc: xZ2se: goto h8q4J; h8q4J: } goto wpS_4; YFkAR: g8ktb: goto dJ9kh; iuRwq: setcookie("{$cookiepre}\x5f\x5f\x73\x65\x73\163\151\x6f\156", $session, 0, "\57", '', $secure, true); goto tcDjC; XhNG_: $salt = local_salt(8); goto LleG3; vni8R: foreach ($dat["\163\x63\x68\145\155\141\x73"] as $schema) { goto Jz0we; Jz0we: $sql = local_create_sql($schema, $support_innodb); goto i6On4; i6On4: local_run($sql, $link, $db); goto hiLll; hiLll: GGvEw: goto prCSq; prCSq: } goto YFkAR; JUuOH: $dbfile = IA_INSTALL_ROOT . "\x2f\x64\x61\x74\x61\x2f\144\142\x2e\160\150\160"; goto DKsGd; YkkTs: $all_engines = $engines->fetchAll(); goto xBX90; PxiUm: goto FAprT; goto SFko2; wpS_4: qYtsi: goto vni8R; OH2Qa: $authkey = $config["\x73\x65\x74\x74\151\x6e\147"]["\x61\x75\x74\150\x6b\145\171"]; goto WW80D; LQxPM: $db = array("\163\145\162\x76\x65\162" => $config["\144\x62"]["\x6d\141\163\x74\x65\162"]["\x68\157\163\x74"], "\160\157\x72\164" => $config["\x64\142"]["\155\141\x73\x74\x65\162"]["\x70\x6f\x72\x74"], "\x75\x73\145\x72\x6e\141\x6d\145" => $config["\144\x62"]["\155\141\x73\x74\x65\162"]["\x75\163\145\x72\156\x61\x6d\145"], "\x70\141\x73\x73\x77\157\x72\x64" => $config["\144\x62"]["\155\x61\163\164\x65\162"]["\x70\141\163\x73\167\x6f\x72\x64"], "\160\x72\145\x66\151\170" => $config["\144\142"]["\x6d\141\163\164\145\x72"]["\x74\141\x62\154\x65\160\162\x65"], "\x6e\x61\x6d\x65" => $config["\x64\142"]["\155\x61\163\x74\145\162"]["\144\x61\x74\141\x62\141\x73\x65"]); goto R3DGI; WW80D: $link = new PDO("\x6d\171\x73\x71\154\x3a\x64\x62\x6e\141\155\145\75{$db["\156\141\x6d\x65"]}\73\x68\157\163\x74\75{$db["\163\145\162\x76\145\162"]}\73\160\157\162\164\75{$db["\x70\157\x72\164"]}", $db["\165\x73\x65\162\x6e\141\x6d\145"], $db["\160\141\x73\163\x77\157\x72\x64"]); goto OZLr7; khYkG: $session = install_authcode(json_encode($cookie), "\145\x6e\x63\x6f\x64\x65", $authkey); goto Z47TK; DKsGd: if (file_exists(IA_INSTALL_ROOT . "\x2f\151\x6e\x64\145\170\x2e\x70\x68\160") && is_dir(IA_INSTALL_ROOT . "\x2f\x77\145\x62") && file_exists(IA_INSTALL_ROOT . "\x2f\x66\162\x61\155\x65\x77\157\162\x6b\x2f\166\x65\x72\x73\x69\157\156\56\x69\156\x63\56\x70\x68\160") && file_exists($dbfile)) { goto UHSXv; } goto CZWHd; tcDjC: return true; goto CDZeY; vTOkc: bQ4UE: goto Xlz2L; W90Qy: $link->exec("\123\105\124\40\163\x71\154\137\x6d\157\x64\x65\x3d\x27\47"); goto JUuOH; SFko2: UHSXv: goto ym3_c; dJ9kh: foreach ($dat["\x64\x61\164\x61\x73"] as $data) { local_run($data, $link, $db); I6siv: } goto EJ5Dv; kVwQq: $engines = $link->query("\123\x48\x4f\127\x20\x45\x4e\x47\x49\x4e\105\x53\x3b"); goto YkkTs; LleG3: $password = sha1("{$user["\x70\141\163\x73\167\x6f\x72\144"]}\55{$salt}\55{$authkey}"); goto fCAWw; JOK9K: FAprT: goto csnFq; OZLr7: $link->exec("\123\105\124\x20\143\x68\141\x72\x61\143\164\145\x72\x5f\x73\145\164\x5f\x63\x6f\x6e\x6e\x65\x63\x74\151\x6f\x6e\x3d\165\x74\146\x38\x2c\x20\143\x68\141\x72\141\x63\x74\x65\162\137\163\x65\164\137\162\145\163\165\x6c\x74\x73\75\x75\164\146\70\x2c\40\x63\x68\141\162\141\143\x74\145\162\137\x73\x65\164\x5f\143\x6c\151\145\156\x74\75\142\x69\156\141\162\x79"); goto W90Qy; kNlkx: require IA_INSTALL_ROOT . "\x2f\x64\141\164\141\x2f\x63\x6f\156\x66\x69\147\x2e\160\150\160"; goto LQxPM; PsiGi: $cookie["\165\x69\144"] = $link->lastInsertId(); goto DKOd0; vf0C2: if (!(empty($dat) || !is_array($dat))) { goto bQ4UE; } goto HgiVB; csnFq: $user = array("\x75\x73\145\162\x6e\x61\x6d\x65" => "\141\144\x6d\x69\156", "\160\x61\x73\x73\167\x6f\x72\x64" => "\x31\x32\x33\x34\65\x36"); goto XhNG_; CZWHd: return "\345\256\x89\xe8\xa3\205\xe5\214\205\344\xb8\x8d\346\255\243\347\241\256\x2e"; goto PxiUm; s2np1: global $is_https; goto V9Gzp; HgiVB: return "\xe5\256\x89\350\xa3\x85\xe5\x8c\205\344\xb8\215\xe6\xad\xa3\347\xa1\xae\x2c\40\xe6\225\xb0\xe6\x8d\xae\345\xae\211\xe8\243\205\xe8\204\232\346\234\254\347\274\272\xe5\244\xb1\56"; goto vTOkc; fCAWw: $link->exec("\x49\x4e\x53\105\x52\124\x20\x49\x4e\x54\x4f\x20{$db["\x70\162\145\146\x69\170"]}\x75\163\145\162\x73\40\x28\165\163\145\x72\156\x61\155\x65\x2c\40\160\x61\163\x73\167\x6f\x72\x64\x2c\x20\x73\x61\154\x74\x2c\40\x6a\x6f\x69\156\x64\141\x74\145\54\40\x67\162\x6f\165\x70\x69\x64\54\x20\x73\x74\141\164\165\x73\54\40\x66\x6f\165\x6e\x64\145\162\x5f\147\x72\157\x75\x70\151\144\51\x20\126\101\x4c\x55\x45\123\50\x27{$user["\165\x73\x65\x72\156\141\155\145"]}\47\54\40\47{$password}\47\54\40\47{$salt}\47\x2c\x20\47" . time() . "\x27\x2c\x20\61\x2c\40\x32\54\40\x31\51"); goto RjHlw; R3DGI: $cookiepre = $config["\143\x6f\157\153\151\145"]["\x70\x72\145"]; goto OH2Qa; Z47TK: $secure = $is_https ? 1 : 0; goto iuRwq; DKOd0: $cookie["\150\141\163\x68"] = md5($password . $salt); goto khYkG; RjHlw: $cookie = array("\x6c\141\x73\164\166\151\163\x69\164" => '', "\154\x61\163\164\151\160" => ''); goto PsiGi; EJ5Dv: D42bU: goto JOK9K; V9Gzp: define("\x49\116\137\111\101", true); goto kNlkx; CDZeY: } goto S0ffa; HMbZu: exit(we7_error(0, "\x73\165\x63\x63\x65\163\163")); goto eeXdl; fpysJ: eNPrK: goto egPkE; cEo1U: function we7_need_extension() { return array("\172\x69\160", "\160\x64\157", "\160\144\x6f\137\x6d\x79\163\161\154", "\157\160\145\156\163\x73\x6c", "\x67\x64", "\155\x62\x73\x74\x72\151\x6e\147", "\x6d\143\x72\171\x70\x74", "\143\x75\x72\154"); } goto KSjsn; zt_hj: header("\x4c\x6f\x63\141\164\151\x6f\156\72\40" . $forward); goto dXbUK; IALbq: if (!($database_result !== true)) { goto y7d9w; } goto PF9gC; Z2MG3: VLJvw: goto fti_T; Z0c8W: $ret["\x61\154\x77\141\x79\x73\x5f\x70\157\x70\165\x6c\x61\164\145\137\162\x61\x77\137\160\x6f\163\164\137\x64\x61\164\141"]["\162\145\163\x75\x6c\x74"] = @ini_get("\x61\x6c\x77\x61\171\163\137\x70\157\160\165\154\x61\164\145\137\x72\x61\x77\137\160\157\163\164\x5f\x64\141\164\x61"); goto NpmCw; drsMD: define("\101\x50\111\x5f\x4f\x41\125\124\x48\137\x4c\x4f\107\111\116\x5f\125\x52\114", API_HOST . "\57\157\141\x75\164\x68\x2f\x6c\x6f\x67\151\156\55\x75\x72\154\57\151\156\x64\145\170"); goto QCMEA; QlfMO: touch(IA_INSTALL_ROOT . "\57\x64\x61\164\x61\57\x69\156\163\x74\141\154\x6c\56\x6c\157\x63\153"); goto R2IdX; o9SaA: foreach (we7_need_extension() as $extension) { goto XaPtN; urGzk: $ret[$extension]["\x66\141\151\154\145\144"] = true; goto Af3vI; CMScy: CvEOf: goto ur5Rj; ur5Rj: sv1Ki: goto tJOVP; Af3vI: $ret[$extension]["\156\x61\x6d\x65"] = $extension . "\346\x89\xa9\xe5\261\x95"; goto lBMSs; f6z3v: if ($if_ok) { goto CvEOf; } goto urGzk; lBMSs: $ret[$extension]["\162\145\x73\165\154\164"] = "\xe4\xb8\215\xe6\x94\257\xe6\214\x81" . $extension; goto CMScy; XaPtN: $if_ok = extension_loaded($extension); goto f6z3v; tJOVP: } goto jhv4u; vUMc_: function we7_update_sitename($sitename) { goto AwDuy; J0Q_Y: return "\xe7\xab\231\xe7\x82\xb9\xe4\277\xa1\346\x81\257\344\270\x8d\xe5\255\x98\345\234\xa8\xef\xbc\x8c\xe8\257\xb7\xe9\207\x8d\346\x96\260\346\xb3\xa8\xe5\x86\x8c\347\xab\x99\xe7\x82\271\x2e"; goto Kxp3J; dLHOJ: goto P5dld; goto gfhIJ; gfhIJ: KbzG5: goto TstAo; J648p: $site_info = setting_load("\163\151\x74\145"); goto jxTcy; OTDZp: $data = we7_request_api(API_UPDATE_SITENAME, array("\x61\143\x63\x65\x73\x73\137\164\x6f\153\x65\x6e" => $accesstoken, "\x73\x69\164\x65\x5f\x6e\x61\x6d\x65" => $sitename, "\163\151\164\x65\x5f\153\x65\x79" => $site_info["\163\151\x74\145"]["\x6b\x65\171"])); goto dYZKW; nBPk3: P5dld: goto JD95o; CVDTS: return true; goto dLHOJ; TstAo: return $data["\x65\x72\x72\x6f\162"]; goto nBPk3; Kxp3J: Dkh1K: goto OTDZp; AwDuy: global $accesstoken, $_W; goto J648p; dYZKW: if (is_array($data) && isset($data["\145\162\162\x6f\x72"])) { goto KbzG5; } goto CVDTS; jxTcy: if (!(empty($site_info["\163\151\x74\145"]) || empty($site_info["\x73\x69\164\145"]["\153\145\x79"]))) { goto Dkh1K; } goto J0Q_Y; JD95o: } goto biPS3; xL0OV: $ret["\x72\x6f\x6f\164"]["\x6e\141\155\145"] = "\346\x9c\xac\345\x9c\260\xe7\x9b\256\xe5\xbd\225\xe5\x86\x99\xe5\x85\xa5"; goto Nqqw9; f75ZW: $ret["\x64\157\x6d"]["\x6f\153"] = class_exists("\104\x4f\x4d\x44\x6f\x63\165\x6d\145\x6e\x74"); goto k0GJs; Nqqw9: $ret["\x72\157\x6f\x74"]["\x72\x65\163\165\154\164"] = "\346\234\xac\xe5\234\xb0\347\x9b\256\345\275\x95\xe6\x97\240\xe6\xb3\225\xe5\206\x99\345\205\xa5"; goto xuqth; zU0mn: ini_set("\144\151\x73\x70\154\141\171\137\x65\x72\x72\157\x72\x73", 0); goto onlef; DtLoV: $chunk_total = we7_getcookie("\143\x68\x75\156\x6b\x5f\164\x6f\x74\141\x6c"); goto gba4j; Mg0_o: $ret["\x61\154\167\141\x79\163\137\160\157\160\x75\154\141\x74\145\x5f\x72\x61\167\137\x70\157\163\164\137\x64\141\x74\x61"]["\x66\x61\x69\x6c\x65\144"] = @ini_get("\x61\x6c\x77\x61\x79\163\137\160\x6f\160\165\154\141\x74\145\x5f\162\141\167\137\x70\157\163\164\x5f\144\x61\164\141") != "\x2d\x31"; goto f_39O; TjFYr: if (!($action == "\143\x68\x75\156\153\x74\x6f\164\x61\154")) { goto v_54Y; } goto JObN4; zDjsc: goto GCguA; goto amNZu; Zmd5d: EU7hb: goto nBapd; ygTJ0: define("\x41\120\111\x5f\110\x4f\x53\x54", "\150\x74\x74\160\72\57\57\141\x70\151\x2e\x77\67\x2e\x63\x63"); goto drsMD; eTxhU: JJ4cI: goto ufx3b; A6KAF: if (!($action == "\x6f\x61\165\164\150")) { goto JJ4cI; } goto aul8J; R9r69: $ret["\144\x61\164\x61"]["\x72\x65\163\x75\x6c\164"] = "\x64\141\x74\x61\xe7\233\256\345\275\225\346\227\xa0\xe6\xb3\x95\345\206\231\xe5\x85\245"; goto e3qvO; eAkvE: $ret["\141\163\160\137\x74\x61\x67\x73"]["\162\145\163\x75\154\164"] = "\141\163\x70\x5f\164\141\147\x73\xe5\274\x80\345\x90\xaf\xe7\212\266\346\x80\201"; goto fpysJ; WOEGj: $ret["\165\160\x6c\x6f\x61\144"]["\x6e\x61\155\x65"] = "\xe4\270\x8a\344\xbc\xa0\xe9\231\x90\345\x88\266"; goto EAzEA; yvXHx: $sitename_result = we7_update_sitename($sitename); goto FbODO; xF7za: $sitepath = substr($_SERVER["\x50\110\120\x5f\123\x45\114\106"], 0, strrpos($_SERVER["\120\110\x50\137\123\x45\x4c\106"], "\57")); goto BhdtC; GS6JG: exit(we7_error(434, $result)); goto Pqt82; hrwOE: $ret["\166\x65\x72\x73\x69\157\156"]["\x72\145\163\165\x6c\x74"] = PHP_VERSION; goto fgD2u; ONXic: $db_name = trim($_POST["\156\x61\155\145"]); goto xozYN; H1tm4: function local_create_sql($schema, $local_create_sql) { goto OJZtp; pNLXw: foreach ($schema["\x69\156\x64\145\170\145\163"] as $value) { goto TirkY; ipBon: $sql .= "\125\116\111\121\125\105\40\x4b\105\131\40\x60{$value["\156\141\155\145"]}\140\40\x28\x60{$fields}\x60\x29\54\12"; goto JBcI0; TirkY: $fields = implode("\x60\x2c\x60", $value["\x66\151\x65\154\x64\x73"]); goto IP1RD; IP1RD: if (!($value["\164\171\160\x65"] == "\151\156\x64\x65\x78")) { goto rPfqR; } goto Cin0I; Z2bbA: FYGHT: goto MsJyl; ga3_6: if (!($value["\164\x79\160\x65"] == "\x70\x72\x69\x6d\141\162\171")) { goto FYGHT; } goto DrTOZ; MsJyl: peVPt: goto oNawW; DrTOZ: $sql .= "\x50\122\111\115\x41\x52\x59\x20\113\105\131\x20\x28\x60{$fields}\x60\51\x2c\xa"; goto Z2bbA; Yq4ni: if (!($value["\x74\x79\x70\x65"] == "\x75\x6e\x69\161\x75\145")) { goto Eghwp; } goto ipBon; JBcI0: Eghwp: goto ga3_6; Cin0I: $sql .= "\113\x45\x59\x20\x60{$value["\x6e\141\x6d\x65"]}\x60\x20\50\140{$fields}\140\x29\54\xa"; goto CmDR8; CmDR8: rPfqR: goto Yq4ni; oNawW: } goto GFkaw; Oi3aU: $engine = $local_create_sql ? $schema["\145\x6e\x67\151\x6e\x65"] : "\x4d\x79\x49\x53\x41\115"; goto NTeru; OJZtp: $pieces = explode("\137", $schema["\143\150\x61\x72\163\145\164"]); goto AiHja; Sok2j: rFMGn: goto pNLXw; Bmmji: $sql = rtrim($sql); goto iRMzC; AiHja: $charset = $pieces[0]; goto Oi3aU; EX4l7: return $sql; goto KKbIi; iRMzC: $sql = rtrim($sql, "\x2c"); goto hW3vH; NTeru: $sql = "\x43\x52\105\101\x54\x45\40\x54\101\102\x4c\105\x20\x49\106\x20\116\117\x54\40\105\x58\x49\123\124\123\40\140{$schema["\x74\x61\142\154\145\156\141\155\x65"]}\140\40\x28\xa"; goto lFWV2; GFkaw: vxU9x: goto Bmmji; hW3vH: $sql .= "\12\51\x20\x45\x4e\x47\x49\x4e\105\75{$engine}\x20\104\105\106\x41\x55\114\124\40\103\110\x41\x52\x53\105\124\75{$charset}\73\xa\xa"; goto EX4l7; lFWV2: foreach ($schema["\146\151\145\x6c\x64\163"] as $value) { goto E8IaY; ILcpE: ZFrs6: goto lwPPl; vtqWw: if (empty($value["\156\x75\154\x6c"])) { goto ZFrs6; } goto US5A3; Nuw9f: $increment = ''; goto sKZ72; YGf1w: $length = ''; goto cmYrg; ssz1m: if (isset($value["\x64\145\146\x61\165\x6c\x74"])) { goto bdOUh; } goto y0FsE; Z3U0b: BYXmK: goto GVkZs; US5A3: $null = ''; goto CpYKt; cD3dE: $signed = empty($value["\163\x69\x67\156\x65\144"]) ? "\x20\165\x6e\163\151\x67\156\x65\144" : ''; goto vtqWw; cmYrg: goto ZjJK7; goto GHd7Y; ob5Tw: yHyZy: goto zdS49; E8IaY: if (!empty($value["\154\145\x6e\147\164\x68"])) { goto HPXkL; } goto YGf1w; y0FsE: $default = ''; goto dn9_N; friur: ZjJK7: goto cD3dE; lwPPl: $null = "\40\x4e\x4f\x54\40\x4e\125\114\x4c"; goto r1cLv; sKZ72: goto OtOt9; goto aQDpV; GHd7Y: HPXkL: goto tSLMx; i6thT: $sql .= "\x60{$value["\x6e\141\155\x65"]}\140\40{$value["\x74\171\x70\145"]}{$length}{$signed}{$null}{$default}{$increment}\x2c\xa"; goto ob5Tw; aQDpV: bXHS0: goto G8PVj; CpYKt: goto r7u1Z; goto ILcpE; H7PcN: OtOt9: goto i6thT; sMlBQ: bdOUh: goto Jf3Or; tSLMx: $length = "\x28{$value["\154\145\x6e\x67\x74\150"]}\51"; goto friur; GVkZs: if ($value["\x69\x6e\143\x72\145\155\x65\156\164"]) { goto bXHS0; } goto Nuw9f; Jf3Or: $default = "\x20\x44\x45\x46\x41\125\x4c\124\x20\47" . $value["\x64\145\146\141\x75\154\164"] . "\x27"; goto Z3U0b; G8PVj: $increment = "\40\x41\125\x54\117\x5f\111\x4e\x43\x52\x45\x4d\105\116\x54"; goto H7PcN; r1cLv: r7u1Z: goto ssz1m; dn9_N: goto BYXmK; goto sMlBQ; zdS49: } goto Sok2j; KKbIi: } goto wIEmT; ueZYw: goto mHbgJ; goto LUi_J; L5whC: $ret["\x73\x65\x73\x73\x69\157\x6e"]["\x72\145\163\165\154\x74"] = "\xe7\xb3\273\347\xbb\x9f\163\x65\163\163\151\157\x6e\x2e\141\165\164\x6f\x5f\x73\164\x61\162\164\xe5\274\200\345\x90\257"; goto vj1V5; amNZu: FbHvX: goto xrcjL; fbiP9: if (!($i <= $chunk_total)) { goto iwMSh; } goto k8B3G; dXMlV: $ret["\166\x65\162\163\151\x6f\x6e"]["\146\141\151\x6c\x65\144"] = true; goto E12D9; EAzEA: $ret["\165\160\x6c\157\x61\144"]["\x72\x65\163\x75\x6c\x74"] = $server["\x75\160\154\x6f\141\144"]; goto c3G87; A6zII: $password = trim($_POST["\160\x61\x73\x73\x77\x6f\x72\144"]); goto ocQW5; cRz05: g6OPJ: goto r0mvW; gcK_I: function local_writeable($dir) { goto NBXuQ; NRCWp: if (!is_dir($dir)) { goto p6IRa; } goto jB7t4; yJWb1: fclose($fp); goto ifItN; Lvm35: @mkdir($dir, 0777); goto H6QTo; H6QTo: MkMnz: goto NRCWp; dT308: return $writeable; goto TWj3d; M3LqV: KMWU9: goto yJWb1; jB7t4: if ($fp = fopen("{$dir}\57\x74\x65\163\164\56\164\x78\x74", "\167")) { goto KMWU9; } goto HJcq7; HHX4y: u3pi4: goto WM6UG; HJcq7: $writeable = 0; goto Db_W2; ifItN: unlink("{$dir}\57\x74\145\x73\164\x2e\x74\x78\164"); goto S3lRK; WM6UG: p6IRa: goto dT308; S3lRK: $writeable = 1; goto HHX4y; Db_W2: goto u3pi4; goto M3LqV; NBXuQ: $writeable = 0; goto oKz93; oKz93: if (is_dir($dir)) { goto MkMnz; } goto Lvm35; TWj3d: } goto MjuYU; ExM30: $post = array("\141\143\x63\145\163\163\137\x74\157\153\145\156" => $accesstoken, "\x63\150\165\x6e\153" => $chunk_num); goto A7okN; M8jcN: C53y4: goto dkRsI; TmxWf: if ($ret["\146\157\x70\145\x6e"]["\x6f\153"]) { goto RXYMB; } goto jZmxq; kcMiF: exit(we7_error(0, $chunk_num)); goto HmmBw; gZ72E: NPG0d: goto fbiP9; fW_YN: $ret["\x64\x61\x74\141"]["\156\x61\155\145"] = "\144\141\164\x61\xe7\x9b\256\xe5\275\x95\xe5\x86\231\345\x85\xa5"; goto R9r69; eGu4K: goto NPG0d; goto leisM; jxAGS: $siteroot = ($is_https ? "\x68\x74\164\x70\x73\72\57\57" : "\150\164\x74\x70\x3a\x2f\x2f") . $_SERVER["\x53\x45\122\126\105\x52\137\x4e\101\x4d\x45"] . $sitepath; goto A6KAF; biPS3: function we7_update_user($username, $password) { goto AOsBJ; LWK3L: $result = pdo_update("\165\x73\145\162\x73", array("\x75\x73\145\x72\156\x61\x6d\x65" => $username, "\160\141\x73\x73\167\x6f\x72\144" => $password), array("\165\151\x64" => $userinfo["\x75\x69\x64"])); goto Fy76_; Fy76_: $cookie = array("\154\x61\x73\164\166\151\163\151\x74" => '', "\154\x61\163\164\x69\x70" => ''); goto cHCId; XSmeD: load()->model("\165\x73\x65\x72"); goto UzPQ2; UzPQ2: $userinfo = pdo_get("\x75\x73\x65\x72\x73", array("\x75\x73\145\x72\x6e\141\x6d\x65" => "\141\144\x6d\151\156")); goto YQCjz; YQCjz: $password = user_hash($password, $userinfo["\163\141\x6c\164"]); goto LWK3L; cHCId: $cookie["\165\x69\144"] = $userinfo["\165\x69\x64"]; goto tT6rG; vjjBC: $session = install_authcode(json_encode($cookie), "\145\x6e\x63\157\144\x65", $_W["\143\157\x6e\146\x69\147"]["\163\x65\x74\x74\x69\156\147"]["\x61\x75\x74\150\x6b\x65\171"]); goto uGwez; uGwez: $secure = $is_https ? 1 : 0; goto rmBVq; tT6rG: $cookie["\x68\x61\x73\x68"] = md5($password . $userinfo["\163\141\154\x74"]); goto vjjBC; AOsBJ: global $_W, $is_https; goto XSmeD; f13UH: return $result ? true : false; goto fMisZ; rmBVq: setcookie($_W["\143\x6f\156\146\x69\x67"]["\143\x6f\157\x6b\151\x65"]["\x70\162\145"] . "\137\137\163\x65\163\163\x69\x6f\156", $session, 0, "\x2f", '', $secure, true); goto f13UH; fMisZ: } goto GO65n; FrQ7h: if (!($database_result !== true)) { goto VLJvw; } goto HXsPB; kmrKo: exit(we7_error(0, "\163\x75\x63\x63\145\163\163")); goto mh0EB; Ugimv: $server = trim($_POST["\163\145\162\166\145\x72"]); goto jAx8R; eh2x8: GCguA: goto oXbQ9; RfnUr: if (!($action == "\x64\157\x77\x6e\x6c\157\x61\x64")) { goto JNaYS; } goto dsprc; u0KDm: if (!(is_array($data) && isset($data["\145\x72\x72\157\162"]))) { goto nUd0p; } goto zSvCe; vj1V5: rXHAh: goto E8jAU; W2E0t: $filesize = filesize($filename); goto OBYqb; Hekls: $username = trim($_POST["\165\x73\145\x72\156\141\x6d\x65"]); goto A6zII; sP71d: $db_password = trim($_POST["\160\141\163\x73\x77\157\x72\144"]); goto ONXic; gLXKN: define("\x41\x50\111\137\107\105\x54\137\103\x48\x55\116\113\137\120\x41\103\113\101\107\x45", API_HOST . "\57\x75\164\x69\154\57\x70\x61\x63\153\x61\x67\145\x2f\x69\x6e\x73\164\x61\154\x6c"); goto hVYPl; dkRsI: $accesstoken = we7_get_accesstoken(); goto WK04j; klaOj: $ret["\144\157\x6d"]["\x66\x61\x69\x6c\145\144"] = true; goto IQ24_; cvgRn: $data = we7_request_api(API_OAUTH_LOGIN_URL, array("\x72\x65\x64\151\x72\145\x63\x74" => $callback)); goto VGJBv; fdiZl: exit(we7_error(400, $chunk_num)); goto NzoSt; Lak77: kw7Hd: goto zsMuO; jUrm0: exit(we7_error(433, "\x61\x63\143\145\x73\x73\164\157\x6b\145\x6e\x20\145\170\160\151\x72\x65\x64\x2e")); goto Yzzzo; gIZfN: exit; goto M8jcN; Xqtpn: EqKV4: goto TjFYr; QLS_3: nUd0p: goto n9T68; sr5bf: if (!($action == "\x6c\157\147\x69\x6e")) { goto A6IUI; } goto DtON2; pqY3N: if (!(!file_exists(IA_INSTALL_ROOT . "\57\x63\150\165\x6e\153\x5f" . $i) || empty($chunk_i_filesize))) { goto dHG7U; } goto DS_HT; c3G87: b7BFH: goto tPmdS; FOfT1: $ret["\141\x73\160\137\164\141\147\163"]["\146\x61\x69\x6c\145\x64"] = true; goto hq6iY; pYFOb: $filename = IA_INSTALL_ROOT . "\57\143\150\x75\156\x6b\x5f" . $chunk_num; goto W2E0t; dfJXg: set_time_limit(0); goto Y2IW1; wvBRs: $action = trim($_GET["\163\164\145\160"]); goto G1axs; ShNDS: JmbRd: goto ipncK; IQ24_: $ret["\144\157\x6d"]["\156\x61\155\x65"] = "\x44\x4f\x4d\104\157\x63\x75\x6d\145\156\164"; goto wKOgl; fgD2u: S7ipf: goto BRr52; IT8xB: if ($user_result) { goto I6SGM; } goto Q9p2r; z4A39: $ret["\x72\x6f\157\164"]["\146\x61\x69\x6c\145\x64"] = true; goto xL0OV; EJQTq: exit(we7_error(421, $handle_result)); goto pZP5c; hNpp1: jX7_t: goto QlfMO; ZBLaZ: if ($result) { goto FbHvX; } goto xPBk_; qcKtW: exit(we7_error(432, "\350\xaf\267\xe5\x85\210\xe8\x8e\267\xe5\217\x96\xe5\210\x86\345\x8d\267\xe6\x80\273\351\207\x8f\x2e")); goto ShNDS; Y7mgD: $verfile = IA_INSTALL_ROOT . "\x2f\146\x72\x61\x6d\x65\167\157\162\x6b\x2f\166\145\162\163\151\157\156\56\x69\156\x63\x2e\160\150\x70"; goto tEz8f; NAs3G: pESOV: goto Xqtpn; T0SOh: function local_mkdirs($path) { goto n7Nwp; sJOsM: return is_dir($path); goto zohad; gZB28: mkdir($path); goto HnE4Z; n7Nwp: if (is_dir($path)) { goto cocWf; } goto rmgD3; rmgD3: local_mkdirs(dirname($path)); goto gZB28; HnE4Z: cocWf: goto sJOsM; zohad: } goto qEC35; xg5Zb: $server["\165\160\x6c\x6f\x61\x64"] = @ini_get("\x66\x69\154\x65\x5f\x75\160\x6c\x6f\x61\x64\x73") ? ini_get("\165\x70\154\157\x61\x64\137\155\141\170\137\146\151\x6c\x65\163\151\172\x65") : "\165\156\153\x6e\x6f\167"; goto DF0jR; HM1DS: $i = 1; goto gZ72E; lt6M9: setting_save($site, "\x73\x69\x74\145"); goto XK9vD; lHz0x: exit(we7_error(400, "\x63\x68\x75\x6e\x6b\xe5\244\247\344\272\216\346\x9c\200\345\xa4\xa7\345\200\274")); goto PvqD3; zsMuO: $url = $siteroot . "\57\151\x6e\x73\x74\141\154\154\56\160\150\160\x3f\x73\x74\x65\160\75\x6f\141\x75\164\x68"; goto sR9pQ; JObN4: $data = we7_request_api(API_GET_PACKAGE_MD5_AND_CHUNKTOTAL, array("\141\143\x63\x65\x73\163\x5f\x74\157\153\145\x6e" => $accesstoken)); goto lb6VT; PvqD3: d1oMk: goto pYFOb; R2IdX: Gi3Hi: goto kmrKo; szWzs: if (!(!file_exists(IA_INSTALL_ROOT . "\x2f\144\141\x74\x61\x2f\x63\x6f\156\146\x69\147\56\160\x68\x70") || !empty($_POST))) { goto i7dRK; } goto Ugimv; cYH5_: MjTUk: goto NMm3p; k8B3G: $chunk_i_filesize = filesize(IA_INSTALL_ROOT . "\57\x63\x68\x75\x6e\153\x5f" . $i); goto pqY3N; e3qvO: imMWc: goto o9SaA; QCMEA: define("\101\x50\x49\137\117\x41\125\124\x48\137\101\103\x43\x45\123\123\124\117\113\105\116", API_HOST . "\x2f\157\141\x75\x74\150\x2f\141\143\x63\145\x73\x73\55\x74\157\x6b\x65\156\x2f\143\x6f\x64\x65"); goto KR4fg; y10mA: I6SGM: goto eiTdO; KSjsn: function we7_get_accesstoken() { goto hrO9q; hrO9q: $cookie_accesstoken = we7_getcookie("\x61\143\x63\145\x73\x73\x74\157\x6b\x65\x6e"); goto FnDIN; xn_nc: return ''; goto xdvBO; VXtLd: return $accesstoken["\141\143\x63\145\163\x73\124\157\x6b\x65\x6e"]; goto A7Xs_; A7Xs_: K25pU: goto xn_nc; FnDIN: $accesstoken = json_decode($cookie_accesstoken, true); goto kVAkZ; kVAkZ: if (!(!empty($accesstoken) && !empty($accesstoken["\x61\x63\143\x65\163\x73\x54\157\x6b\x65\156"]) && $accesstoken["\145\170\160\x69\x72\x65\x54\151\x6d\145"] > time())) { goto K25pU; } goto VXtLd; xdvBO: } goto J07aR; r0mvW: exit(we7_error(0, $chunk_num)); goto eh2x8; HfjJt: z3WKr: goto p4lVe; HII72: v_54Y: goto RfnUr; lb6VT: if (is_array($data) && isset($data["\145\x72\162\x6f\x72"])) { goto r6Kf7; } goto moe1E; NU71r: if (!($server["\x75\160\154\x6f\x61\x64"] == "\165\156\x6b\156\157\167" || !strstr($server["\x75\x70\x6c\x6f\x61\x64"], "\155"))) { goto b7BFH; } goto hNTVm; oU_ki: $post = file_get_contents("\x70\150\x70\x3a\57\57\151\156\x70\x75\x74"); goto h6FBa; WK04j: if (!(empty($accesstoken) && $action != "\162\x65\x67\151\x73\x74\145\162\x5f\143\141\x6c\154\142\141\143\x6b")) { goto Fb7JK; } goto BGiWl; hq6iY: $ret["\141\163\x70\137\x74\x61\x67\x73"]["\156\x61\x6d\145"] = "\x61\163\160\x5f\x74\x61\x67\163"; goto eAkvE; x2OUC: define("\111\x4e\137\123\x59\x53", true); goto WjI9m; HmmBw: PPg3Q: goto ExM30; eWFyY: if (!empty($data)) { goto EDRCn; } goto ig24A; moe1E: we7_setcookie("\x70\x61\x63\x6b\141\147\x65\x5f\155\x64\x35", $data["\x6d\x64\65"]); goto oBwPJ; oBwPJ: we7_setcookie("\x63\150\x75\x6e\153\137\x74\x6f\164\141\154", $data["\x63\150\x75\x6e\x6b\137\164\x6f\x74\141\154"]); goto Shiy9; Q9p2r: exit(we7_error(400, "\xe4\277\256\xe6\x94\271\347\224\250\346\210\267\xe5\220\x8d\345\257\206\xe7\xa0\x81\xe5\xa4\xb1\xe8\264\245\x2e")); goto y10mA; eJXZX: define("\x41\x50\111\137\x55\120\x44\x41\x54\105\137\x53\x49\x54\105\116\x41\115\105", API_HOST . "\x2f\x73\151\x74\x65\57\162\x65\x67\151\163\164\145\x72\x2f\x72\145\156\141\x6d\145"); goto WyscI; DS_HT: $finished = false; goto o3YHG; dAdHF: if (!($action == "\x72\145\x67\x69\x73\164\145\162\x5f\143\141\154\x6c\142\141\143\x6b")) { goto AV0V_; } goto oU_ki; BRr52: if (!(version_compare(PHP_VERSION, "\x37\56\60\56\60") == -1 && version_compare(PHP_VERSION, "\x35\x2e\x36\56\x30") >= 0)) { goto EU7hb; } goto Mg0_o; yZVVL: if (!($finished === true)) { goto g6OPJ; } goto UfznI; VR4ws: $site = array("\x6b\x65\171" => $auth["\153\x65\x79"], "\164\157\x6b\145\x6e" => $auth["\164\x6f\x6b\145\x6e"]); goto lt6M9; sZQvu: r6Kf7: goto mPMva; jZmxq: $ret["\146\x6f\x70\145\x6e"]["\x66\141\151\154\x65\x64"] = true; goto BGHQo; eiTdO: bYFnm: goto HMbZu; j5Ex1: $data = we7_request_api(API_OAUTH_ACCESSTOKEN, array("\143\157\144\x65" => $code)); goto u0KDm; OY3K0: exit(we7_error(400, "\xe4\277\xae\xe6\x94\xb9\347\xab\x99\xe7\202\271\xe5\x90\x8d\347\xa7\xb0\xe5\244\xb1\350\264\245\x2e")); goto Q624W; jhv4u: tbgtl: goto rbn3M; oXbQ9: JNaYS: goto nbc5W; hVYPl: define("\x41\120\x49\x5f\x4f\x41\x55\124\110\137\122\105\x47\111\x53\124\105\x52\x5f\x53\x49\124\x45", API_HOST . "\x2f\163\x69\x74\x65\x2f\162\x65\147\151\x73\x74\x65\x72\57\151\156\x64\x65\170"); goto eJXZX; MtxpJ: $is_https = $_SERVER["\x53\x45\x52\x56\x45\x52\137\x50\x4f\x52\x54"] == 443 || isset($_SERVER["\x48\x54\x54\120\x53"]) && strtolower($_SERVER["\x48\124\x54\120\123"]) != "\157\146\x66" || strtolower($_SERVER["\x48\x54\124\120\x5f\x58\x5f\106\x4f\x52\x57\101\x52\x44\105\x44\137\120\122\117\x54\117"]) == "\150\164\x74\x70\163" || strtolower($_SERVER["\110\124\124\x50\x5f\x58\137\103\114\x49\105\x4e\124\x5f\x53\x43\x48\105\115\105"]) == "\x68\164\164\x70\163" ? true : false; goto xF7za; Shiy9: exit(we7_error(0, array("\164\x6f\x74\141\x6c" => $data["\x63\150\x75\156\153\x5f\164\157\164\141\x6c"]))); goto NG3a6; tHWjq: if (file_exists(IA_INSTALL_ROOT . "\57\x64\x61\164\141\57\x69\156\163\x74\141\154\x6c\x2e\x6c\x6f\143\153")) { goto Gi3Hi; } goto ah8I_; l63X0: RXYMB: goto f75ZW; BGHQo: $ret["\x66\157\x70\x65\x6e"]["\x6e\x61\155\145"] = "\x66\x6f\x70\x65\156"; goto egDaA; VGJBv: if (!(is_array($data) && isset($data["\x65\x72\162\157\x72"]))) { goto MOSHB; } goto iGPvs; ws01u: $database_result = we7_db(); goto IALbq; D29Fq: $ret["\163\145\163\163\151\157\156"]["\146\141\151\154\x65\144"] = true; goto aCtGB; dXbUK: exit; goto gaPb7; G1axs: $action = in_array($action, $actions) ? $action : ''; goto UpdJp; NG3a6: goto xn5tj; goto sZQvu; J07aR: function we7_handle_chunk() { goto PwgEM; LSfjD: RcqGQ: goto KqQQi; DcYH0: return $result; goto EqYrc; W88sx: goto C8lK9; goto oDDlT; jUDEp: $filename = "\56\57\143\x68\x75\x6e\x6b\x5f" . $i; goto q8_K6; oyT3E: $res = $zip->open($tmpfile); goto HytmS; mLxpu: return "\345\256\211\350\xa3\205\345\214\x85\344\270\215\346\255\243\347\xa1\xae"; goto Qg4a_; PwgEM: $package_md5 = we7_getcookie("\160\141\x63\153\x61\147\x65\137\x6d\144\x35"); goto uxSdW; kckWr: fawwg: goto j4ZMy; g2kGX: $chunk_num = we7_getcookie("\x63\150\165\x6e\153\137\x74\157\x74\x61\x6c"); goto TwoZ2; b225C: if (!($i <= $chunk_num)) { goto UgnzA; } goto jUDEp; O_O23: $zip->close(); goto LSfjD; TwoZ2: $i = 1; goto i6lKV; Vuyrc: $result = true; goto akNnC; gjpWv: goto RcqGQ; goto kckWr; Qg4a_: VgYvz: goto DcYH0; AF9x5: if (!($result === false)) { goto VgYvz; } goto mLxpu; i6lKV: UgCtm: goto b225C; YfW_8: $result = false; goto gjpWv; icub1: file_put_contents($tmpfile, file_get_contents($filename), FILE_APPEND); goto p04oK; ByNBn: $i++; goto HC7DO; X1w5L: UgnzA: goto Vuyrc; uxSdW: $tmpfile = "\56\x2f\x77\x65\x37\x73\x6f\x75\162\x63\145\56\172\151\160"; goto g2kGX; HytmS: if ($res === TRUE) { goto fawwg; } goto YfW_8; KqQQi: gCtBk: goto AF9x5; akNnC: if (!(file_exists($tmpfile) && $package_md5 === md5_file($tmpfile))) { goto gCtBk; } goto ZE_No; HC7DO: goto UgCtm; goto X1w5L; p04oK: C8lK9: goto ByNBn; j4ZMy: $zip->extractTo(IA_INSTALL_ROOT); goto O_O23; q8_K6: if (file_exists($filename)) { goto t34mo; } goto W88sx; oDDlT: t34mo: goto icub1; ZE_No: $zip = new ZipArchive(); goto oyT3E; EqYrc: } goto zAX5L; weloR: exit(we7_error(400, "\346\225\260\346\215\256\xe9\224\231\350\257\xaf\x2e")); goto g84iz; pZP5c: U7SE4: goto cRz05; UpdJp: if (!(file_exists(IA_INSTALL_ROOT . "\x2f\144\x61\164\141\57\151\x6e\x73\164\141\x6c\154\x2e\x6c\157\x63\x6b") && !in_array($action, array("\157\x61\165\x74\150", "\x6c\x6f\147\x69\x6e")))) { goto C53y4; } goto wI_Mi; NzoSt: goto qExci; goto HfjJt; UfznI: $handle_result = we7_handle_chunk(); goto gLUR_; RaACR: $ret["\x64\x61\x74\x61"]["\146\x61\151\x6c\145\144"] = true; goto fW_YN; Pqt82: goto pESOV; goto y_V21; s3sv6: if (!($sitename != $siteroot . "\xe7\x9a\204\xe7\253\x99\xe7\x82\xb9")) { goto PnNx3; } goto yvXHx; GO65n: function we7_finish() { goto SiF3E; lCy0y: @unlink(IA_INSTALL_ROOT . "\x2f\144\141\164\141\x2f\x64\x62\56\x6c\157\x63\153"); goto qUk7C; SiF3E: global $_W; goto A8Iff; v7zB8: gW4Mm: goto WDw6l; qo71w: we7_setcookie("\x70\141\x63\x6b\141\147\x65\x5f\x6d\x64\x35", '', -10); goto AjBw_; Nhdou: cache_build_frame_menu(); goto OnZUM; dg4wm: return true; goto l1X2M; CfHra: @unlink(IA_INSTALL_ROOT . "\57\x64\x61\164\141\57\x64\x62\x2e\160\x68\x70"); goto lCy0y; Guj8m: @unlink("\56\x2f\x63\x68\165\156\153\x5f" . $i); goto v7zB8; OnZUM: cache_build_setting(); goto lXQaw; D6anW: @unlink("\x2e\57\x77\145\67\163\x6f\165\162\x63\145\x2e\172\151\x70"); goto SF6fu; b46cW: J5vkM: goto gquo4; lXQaw: cache_build_users_struct(); goto RjAdK; QmGI3: load()->model("\143\141\x63\x68\145"); goto Nhdou; dpGIe: load()->model("\163\x65\x74\x74\x69\156\147"); goto QmGI3; RLjuR: load()->web("\x74\145\155\x70\x6c\141\164\x65"); goto dpGIe; WDw6l: $i++; goto pa505; Mwreh: load()->web("\x63\157\x6d\155\157\156"); goto RLjuR; SF6fu: $i = 1; goto b46cW; CNqd1: require IA_INSTALL_ROOT . "\x2f\x77\x65\x62\x2f\x63\157\x6d\155\157\156\x2f\x62\x6f\157\x74\x73\164\162\141\x70\56\x73\171\x73\x2e\151\156\x63\x2e\160\x68\160"; goto E_ISk; A8Iff: $chunk_num = we7_getcookie("\x63\150\x75\156\153\x5f\164\x6f\164\141\154"); goto D6anW; RjAdK: cache_build_module_subscribe_type(); goto dg4wm; oZdRd: Jp2jh: goto qo71w; kZiec: require IA_INSTALL_ROOT . "\x2f\x66\162\141\155\145\x77\x6f\162\x6b\x2f\142\157\x6f\x74\x73\x74\162\x61\x70\56\151\x6e\x63\56\x70\x68\x70"; goto CNqd1; gquo4: if (!($i <= $chunk_num)) { goto Jp2jh; } goto Guj8m; pa505: goto J5vkM; goto oZdRd; qUk7C: define("\x49\116\137\123\131\123", true); goto kZiec; AjBw_: we7_setcookie("\143\150\x75\156\x6b\137\x74\157\164\141\154", '', -10); goto CfHra; E_ISk: $_W["\165\x69\144"] = $_W["\151\x73\146\157\165\156\x64\145\x72"] = 1; goto Mwreh; l1X2M: } goto IlKdJ; hk0Sc: qExci: goto PIc2z; HXsPB: exit(we7_error(419, $database_result)); goto Z2MG3; n9T68: we7_setcookie("\141\x63\143\x65\163\163\x74\157\153\x65\156", $data); goto DRCbA; l7Ddp: y7d9w: goto Guwh_; ipncK: if (!($chunk_num > $chunk_total)) { goto d1oMk; } goto lHz0x; WjI9m: require IA_INSTALL_ROOT . "\57\146\x72\141\x6d\145\167\157\162\153\57\142\157\x6f\x74\163\x74\162\141\x70\x2e\151\156\143\56\x70\x68\x70"; goto VR4ws; XK9vD: exit(we7_error(0, "\163\x75\143\143\x65\x73\x73")); goto ZpO1h; S0ffa: function we7_register_site() { goto aUEXO; JEXuS: $post = array("\141\x63\x63\x65\163\163\x5f\164\x6f\153\145\x6e" => $accesstoken, "\156\141\x6d\145" => $siteroot . "\xe7\x9a\204\xe7\xab\x99\347\x82\xb9", "\x75\162\154" => $siteroot, "\166\x65\162\163\151\x6f\x6e" => $version, "\162\145\x6c\x65\141\x73\145" => $release, "\x63\141\x6c\154\142\x61\x63\x6b" => $callback); goto ICmQz; upwpO: return $data["\145\162\x72\157\162"]; goto NiRxN; VM0OL: ZxGYR: goto upwpO; ukmKl: require IA_INSTALL_ROOT . "\x2f\x66\162\141\155\x65\x77\157\162\x6b\57\166\x65\x72\163\x69\157\156\56\151\156\143\x2e\160\x68\160"; goto qawSJ; aUEXO: global $siteroot, $accesstoken; goto Iv5zu; CQCJW: return true; goto vuYIv; onqIF: $callback = urlencode($siteroot . "\x2f\x69\x6e\x73\164\x61\154\x6c\56\x70\x68\160\77\163\164\145\160\75\x72\145\147\151\x73\164\x65\x72\137\143\141\x6c\x6c\142\141\x63\153"); goto JEXuS; vuYIv: goto sfJGy; goto VM0OL; Iv5zu: define("\x49\x4e\x5f\111\x41", true); goto ukmKl; yqaIF: $release = IMS_RELEASE_DATE; goto onqIF; NiRxN: sfJGy: goto tNQkT; ICmQz: $data = we7_request_api(API_OAUTH_REGISTER_SITE, $post); goto aoIuO; qawSJ: $version = IMS_VERSION; goto yqaIF; aoIuO: if (is_array($data) && isset($data["\x65\162\x72\x6f\x72"])) { goto ZxGYR; } goto CQCJW; tNQkT: } goto NT77_; yIdkc: function we7_error($num, $message = "\x73\x75\x63\143\145\163\163") { $num = intval($num); return json_encode(array("\145\x72\x72\156\157" => $num, "\144\x61\x74\x61" => $message)); } goto Rb4en; gigbH: function local_config() { $cfg = "\74\77\160\150\160\xd\xa\x64\145\146\151\x6e\145\x64\x28\47\111\116\x5f\x49\101\47\x29\x20\x6f\162\40\145\x78\x69\x74\x28\47\x41\x63\x63\x65\163\x73\40\x44\x65\156\151\x65\144\47\51\x3b\15\12\15\12\x24\143\x6f\156\146\151\147\40\75\40\x61\162\162\x61\171\x28\x29\73\15\xa\xd\xa\44\143\157\156\146\x69\x67\133\x27\x64\142\x27\135\133\x27\155\x61\x73\164\145\x72\x27\x5d\133\x27\150\x6f\163\x74\x27\135\x20\x3d\x20\47\173\x64\x62\x2d\163\x65\x72\166\145\162\x7d\47\73\15\xa\44\x63\x6f\156\146\x69\x67\133\x27\x64\x62\x27\135\133\x27\155\x61\x73\164\145\x72\x27\135\133\x27\x75\x73\x65\x72\x6e\141\155\x65\x27\135\40\x3d\40\x27\173\x64\142\x2d\165\x73\145\x72\x6e\141\155\x65\175\x27\73\xd\12\x24\x63\x6f\156\146\x69\147\133\47\144\142\x27\x5d\133\47\x6d\x61\163\164\x65\162\47\x5d\x5b\47\x70\141\x73\163\167\157\x72\144\47\135\40\75\x20\x27\x7b\x64\x62\55\x70\141\x73\163\167\x6f\x72\x64\175\x27\x3b\xd\xa\x24\x63\157\x6e\146\151\147\x5b\47\144\142\47\135\133\47\155\x61\163\x74\145\162\x27\x5d\133\47\x70\x6f\162\164\47\135\x20\x3d\40\47\x7b\144\142\55\x70\x6f\162\164\175\47\x3b\xd\xa\44\143\157\x6e\x66\151\x67\133\47\x64\142\47\x5d\x5b\47\x6d\141\163\164\x65\x72\47\135\133\x27\144\141\x74\x61\142\x61\163\145\47\x5d\x20\75\40\47\x7b\x64\x62\x2d\156\x61\155\x65\175\x27\x3b\15\xa\x24\x63\x6f\156\x66\x69\147\x5b\x27\x64\x62\47\135\x5b\x27\155\141\163\x74\145\x72\x27\135\133\47\143\x68\141\162\x73\145\164\47\135\x20\x3d\x20\x27\165\164\x66\70\47\73\xd\12\44\143\x6f\x6e\x66\151\147\x5b\47\x64\x62\x27\135\133\47\155\141\163\x74\x65\162\x27\135\x5b\x27\x70\143\x6f\156\156\145\143\x74\x27\135\40\75\40\x30\73\xd\xa\x24\143\x6f\x6e\146\x69\147\133\x27\144\x62\47\x5d\133\x27\155\x61\x73\164\x65\x72\x27\x5d\133\47\164\141\142\x6c\145\160\162\145\x27\x5d\x20\x3d\40\x27\173\x64\142\x2d\164\x61\142\154\145\160\162\x65\x7d\47\73\15\xa\15\12\44\143\x6f\x6e\146\x69\147\133\x27\x64\142\47\x5d\x5b\x27\163\154\x61\166\145\137\x73\164\x61\164\165\x73\x27\135\40\x3d\x20\x66\x61\x6c\163\x65\73\xd\xa\44\x63\157\156\x66\151\x67\133\47\144\x62\x27\135\133\47\163\x6c\141\x76\145\47\135\x5b\x27\61\47\x5d\x5b\x27\x68\157\x73\164\x27\x5d\40\x3d\40\47\x27\x3b\xd\xa\x24\143\x6f\x6e\146\151\147\133\x27\144\142\47\x5d\133\47\x73\154\x61\x76\145\x27\x5d\133\47\x31\47\x5d\133\47\x75\163\145\162\156\x61\x6d\145\x27\135\x20\75\x20\47\x27\x3b\xd\12\x24\143\157\x6e\146\151\147\x5b\47\144\142\47\135\133\47\x73\x6c\x61\x76\145\47\x5d\133\47\61\x27\135\x5b\47\160\x61\x73\x73\167\x6f\x72\144\x27\x5d\40\x3d\x20\x27\x27\73\15\12\44\143\x6f\x6e\x66\151\x67\133\x27\x64\x62\47\x5d\133\x27\163\x6c\141\x76\145\47\135\133\47\61\47\x5d\133\x27\160\157\x72\164\x27\135\x20\x3d\x20\47\63\63\x30\67\x27\x3b\15\12\44\x63\x6f\x6e\x66\x69\147\133\47\144\142\47\135\133\47\163\x6c\x61\x76\x65\x27\135\x5b\47\x31\47\x5d\x5b\x27\144\141\164\141\142\141\163\x65\47\x5d\40\75\x20\x27\x27\x3b\xd\12\x24\143\157\156\146\151\147\x5b\x27\144\142\47\x5d\133\47\x73\154\x61\x76\x65\x27\x5d\133\47\61\x27\x5d\x5b\x27\143\x68\x61\162\163\145\x74\47\x5d\40\75\40\x27\165\164\146\70\47\x3b\15\xa\44\143\x6f\156\146\x69\147\x5b\x27\144\x62\47\135\x5b\x27\163\154\x61\x76\145\x27\135\133\47\x31\47\135\133\47\160\143\x6f\x6e\x6e\145\x63\164\47\x5d\x20\75\x20\x30\73\15\12\44\143\x6f\x6e\146\x69\x67\133\47\x64\142\47\x5d\x5b\x27\x73\x6c\141\x76\x65\x27\x5d\133\47\61\x27\135\x5b\x27\x74\141\142\154\145\x70\x72\145\47\135\x20\75\x20\x27\x69\x6d\163\x5f\47\73\xd\12\x24\x63\157\x6e\146\x69\147\133\47\144\142\47\135\133\47\x73\x6c\141\x76\145\47\135\133\x27\61\x27\x5d\x5b\x27\x77\145\151\x67\x68\x74\47\x5d\40\x3d\x20\60\73\15\xa\15\xa\44\x63\x6f\156\146\x69\147\133\x27\x64\142\x27\x5d\x5b\47\143\157\155\x6d\x6f\156\47\135\x5b\x27\163\154\141\166\145\137\x65\170\143\145\x70\x74\x5f\164\141\x62\x6c\x65\47\x5d\x20\x3d\x20\x61\162\162\141\x79\50\x27\x63\157\x72\145\137\163\x65\x73\163\151\x6f\156\163\x27\x29\x3b\xd\12\15\xa\x2f\x2f\40\x2d\x2d\55\x2d\55\x2d\55\x2d\55\x2d\x2d\x2d\x2d\x2d\55\55\55\55\55\55\x2d\55\x2d\x2d\55\55\x20\x20\x43\117\x4e\x46\111\x47\x20\103\x4f\x4f\x4b\x49\x45\x20\x20\55\55\55\55\55\x2d\x2d\55\55\55\x2d\x2d\55\55\x2d\x2d\55\x2d\x2d\x2d\55\x2d\55\x2d\x2d\55\55\x20\57\x2f\xd\12\44\143\157\x6e\x66\151\147\x5b\x27\143\157\157\153\x69\x65\x27\135\133\47\x70\162\x65\47\135\40\x3d\x20\x27\x7b\143\x6f\157\x6b\x69\x65\160\162\x65\175\x27\73\15\12\44\143\x6f\x6e\x66\151\147\x5b\x27\143\x6f\x6f\x6b\x69\145\47\135\x5b\x27\144\157\155\141\151\156\47\135\40\75\x20\47\47\73\xd\xa\x24\143\x6f\156\x66\x69\147\133\47\x63\157\x6f\x6b\x69\x65\47\x5d\x5b\47\x70\x61\x74\150\x27\135\x20\x3d\x20\x27\x2f\47\x3b\15\12\15\xa\x2f\x2f\40\x2d\55\x2d\x2d\x2d\x2d\55\x2d\x2d\x2d\x2d\x2d\x2d\x2d\x2d\55\55\55\x2d\55\x2d\x2d\55\x2d\55\55\40\40\103\117\116\x46\111\107\40\123\105\124\x54\111\116\x47\x20\x20\55\55\55\x2d\55\x2d\55\55\x2d\x2d\55\55\55\x2d\55\x2d\55\x2d\55\x2d\x2d\55\55\x2d\55\55\55\x20\x2f\57\15\xa\x24\143\157\x6e\146\x69\x67\133\47\x73\145\x74\x74\x69\156\147\47\x5d\x5b\x27\143\x68\x61\162\x73\x65\x74\47\135\x20\x3d\x20\47\x75\x74\x66\55\x38\47\73\15\12\44\143\157\156\x66\151\x67\x5b\x27\x73\145\x74\x74\151\x6e\x67\x27\135\133\x27\143\141\143\x68\145\x27\135\40\x3d\40\47\155\x79\x73\161\x6c\x27\x3b\xd\xa\x24\143\157\156\x66\x69\x67\x5b\x27\x73\x65\164\164\x69\156\147\47\x5d\133\47\164\x69\x6d\145\172\x6f\156\x65\47\x5d\40\75\x20\47\101\163\151\x61\57\123\150\141\156\147\x68\141\151\47\x3b\15\12\x24\143\x6f\156\146\x69\x67\x5b\x27\x73\x65\164\164\x69\x6e\x67\47\135\133\x27\155\145\x6d\x6f\x72\171\x5f\x6c\x69\x6d\151\164\x27\x5d\40\75\x20\47\x32\65\x36\115\x27\73\xd\12\x24\x63\x6f\x6e\x66\151\x67\x5b\x27\163\145\x74\164\151\156\147\47\x5d\x5b\x27\146\151\x6c\x65\x6d\157\x64\145\x27\x5d\40\x3d\40\60\x36\x34\64\x3b\xd\12\44\x63\x6f\x6e\x66\151\147\x5b\47\x73\145\164\164\x69\x6e\x67\x27\135\133\x27\x61\x75\164\x68\153\145\171\47\135\x20\x3d\x20\x27\173\141\x75\x74\x68\153\x65\x79\x7d\x27\x3b\xd\12\x24\143\157\156\x66\151\x67\x5b\x27\x73\x65\164\x74\x69\156\x67\47\x5d\x5b\x27\x66\157\x75\156\x64\145\162\x27\x5d\x20\x3d\x20\x27\61\47\73\15\xa\44\143\157\x6e\146\151\x67\133\47\163\x65\164\164\151\x6e\x67\47\135\x5b\47\144\x65\166\x65\x6c\157\160\155\x65\156\x74\47\x5d\40\x3d\x20\60\73\xd\xa\x24\143\157\156\x66\x69\147\x5b\47\163\145\x74\164\x69\x6e\147\x27\135\x5b\47\162\x65\146\145\162\162\145\x72\47\135\40\75\40\60\x3b\xd\xa\15\xa\x2f\57\40\x2d\55\55\x2d\55\55\55\55\55\x2d\55\55\x2d\55\55\x2d\55\55\x2d\x2d\55\55\55\x2d\x2d\x2d\40\40\103\x4f\116\x46\x49\107\40\125\120\114\x4f\x41\x44\40\40\55\x2d\x2d\x2d\55\55\x2d\55\x2d\55\x2d\x2d\x2d\x2d\55\55\55\x2d\55\55\x2d\55\x2d\x2d\55\55\55\40\x2f\x2f\xd\12\44\143\x6f\x6e\146\151\x67\x5b\47\x75\160\154\157\x61\x64\x27\x5d\133\x27\x69\155\141\147\x65\x27\x5d\133\x27\x65\x78\164\x65\x6e\x74\x69\157\156\x73\47\x5d\x20\75\x20\x61\162\162\x61\x79\x28\47\x67\x69\x66\x27\54\40\x27\152\x70\147\47\x2c\x20\x27\x6a\x70\145\x67\47\54\x20\47\160\156\147\x27\x29\73\xd\12\x24\143\x6f\x6e\146\151\147\133\x27\165\x70\x6c\x6f\141\144\x27\135\133\47\x69\x6d\x61\x67\145\47\135\x5b\47\x6c\151\x6d\x69\x74\47\x5d\x20\75\40\x35\x30\60\x30\73\xd\12\x24\x63\157\156\146\x69\x67\x5b\47\x75\160\154\157\141\x64\47\135\x5b\x27\141\x74\164\141\143\150\x64\151\x72\x27\135\40\x3d\x20\x27\173\x61\164\x74\x61\143\150\144\x69\x72\x7d\x27\x3b\15\xa\x24\x63\157\156\146\x69\147\133\47\x75\x70\x6c\x6f\x61\x64\x27\x5d\x5b\x27\141\165\x64\x69\x6f\x27\x5d\x5b\47\145\170\164\x65\x6e\x74\151\x6f\x6e\163\47\135\40\x3d\40\x61\x72\x72\141\171\50\x27\x6d\160\x33\x27\x29\x3b\15\12\44\143\x6f\x6e\146\x69\147\133\47\165\160\154\157\x61\144\x27\x5d\x5b\x27\x61\x75\x64\x69\x6f\47\135\x5b\x27\x6c\x69\155\151\x74\x27\135\40\75\40\x35\60\x30\60\73\15\12\15\xa\x2f\57\x20\x2d\55\x2d\55\55\x2d\55\x2d\55\55\55\55\x2d\55\55\x2d\55\55\x2d\x2d\x2d\55\x2d\55\x2d\x2d\x20\x20\103\x4f\x4e\x46\111\107\x20\115\105\115\103\x41\x43\x48\x45\40\40\x2d\55\x2d\x2d\55\55\55\x2d\55\x2d\55\x2d\x2d\55\x2d\x2d\x2d\x2d\55\55\x2d\55\55\55\x2d\x2d\55\x20\x2f\57\15\12\x24\143\x6f\x6e\146\x69\147\x5b\47\x73\145\x74\164\151\x6e\147\x27\135\x5b\47\155\145\x6d\x63\x61\143\x68\x65\47\135\x5b\x27\x73\145\x72\166\x65\x72\x27\135\x20\75\x20\x27\x27\x3b\xd\xa\44\143\157\156\x66\151\147\x5b\x27\x73\x65\x74\164\151\156\x67\47\x5d\133\x27\x6d\x65\x6d\x63\141\143\150\x65\47\135\x5b\47\160\x6f\x72\164\x27\x5d\x20\x3d\x20\x31\x31\x32\x31\61\73\xd\xa\44\x63\157\x6e\146\x69\x67\x5b\47\163\145\x74\164\151\156\147\47\135\x5b\x27\x6d\x65\x6d\143\141\143\150\x65\47\x5d\133\x27\160\143\x6f\156\x6e\x65\x63\164\47\x5d\x20\75\40\61\73\15\12\x24\143\157\156\x66\151\x67\133\47\163\145\x74\164\x69\x6e\147\47\135\133\x27\x6d\x65\x6d\143\141\143\150\x65\47\135\133\x27\164\x69\x6d\145\157\x75\x74\47\x5d\x20\x3d\40\x33\x30\73\xd\12\x24\x63\157\156\146\x69\147\133\x27\163\x65\x74\x74\151\x6e\x67\x27\x5d\133\47\x6d\145\155\143\x61\x63\x68\145\47\x5d\x5b\x27\163\x65\x73\163\x69\157\156\x27\x5d\x20\x3d\40\x31\x3b\15\12\15\12\57\x2f\x20\55\x2d\55\55\x2d\x2d\x2d\x2d\x2d\x2d\55\x2d\x2d\55\x2d\55\55\55\x2d\x2d\x2d\x2d\x2d\x2d\x2d\55\x20\40\103\117\x4e\x46\x49\107\x20\120\x52\x4f\x58\x59\40\x20\55\x2d\55\55\x2d\x2d\x2d\x2d\x2d\55\x2d\x2d\55\x2d\x2d\55\55\x2d\55\x2d\x2d\55\55\x2d\55\55\55\40\57\x2f\15\12\44\x63\157\x6e\x66\151\147\x5b\x27\163\x65\164\x74\151\156\147\47\x5d\133\x27\x70\x72\157\170\171\47\x5d\133\x27\x68\x6f\163\164\47\x5d\40\75\40\47\x27\x3b\15\xa\x24\143\x6f\x6e\146\151\147\x5b\x27\x73\x65\164\164\151\x6e\x67\47\x5d\x5b\x27\160\162\157\170\171\47\135\133\x27\141\165\x74\150\47\x5d\40\x3d\40\47\x27\x3b"; return trim($cfg); } goto T0SOh; f_39O: $ret["\x61\154\167\141\171\163\x5f\160\x6f\x70\165\x6c\x61\164\x65\x5f\162\x61\x77\137\160\157\x73\164\x5f\x64\x61\164\141"]["\x6e\x61\x6d\145"] = "\141\154\x77\x61\171\x73\137\160\x6f\x70\x75\x6c\x61\x74\145\x5f\162\x61\167\137\x70\157\x73\164\137\144\x61\x74\x61\xe9\x85\215\xe7\275\256"; goto Z0c8W; wI_Mi: header("\x6c\157\143\x61\x74\151\x6f\156\x3a\x20\x2e\x2f\x69\156\144\x65\170\56\x70\150\160"); goto gIZfN; NMm3p: $ret["\163\145\163\163\151\x6f\x6e"]["\x6f\153"] = ini_get("\x73\x65\163\x73\x69\x6f\156\56\141\165\164\157\x5f\x73\x74\141\x72\164"); goto ozNQE; Ov6Re: if (!(is_array($data) && isset($data["\x65\162\162\157\x72"]))) { goto LkkMS; } goto L_xtL; ozNQE: if (!(!empty($ret["\163\x65\x73\x73\151\157\156"]["\157\x6b"]) && strtolower($ret["\x73\145\x73\x73\x69\157\156"]["\157\153"]) == "\157\x6e")) { goto rXHAh; } goto D29Fq; mPMva: if ($data["\x65\162\162\x6f\x72"] == 401) { goto nkoY1; } goto nH6xN; oQnOo: xn5tj: goto HII72; DRJbW: echo "\x3c\41\x64\157\143\x74\x79\x70\x65\x20\x68\164\155\x6c\x3e\xd\12\x3c\x68\164\155\x6c\40\154\141\156\147\75\42\145\156\x22\x3e\xd\xa\x3c\x68\x65\x61\x64\x3e\15\xa\40\x20\x3c\155\x65\164\x61\x20\x63\x68\x61\162\x73\x65\164\x3d\42\x75\164\x66\x2d\x38\x22\x3e\15\12\40\x20\74\x74\151\x74\154\145\x3e\x57\145\67\x49\156\163\164\141\x6c\154\74\57\164\x69\164\154\x65\x3e\15\xa\40\x20\74\142\x61\163\145\40\150\162\145\x66\x3d\42" . $sitepath . "\x2f\x69\156\163\164\x61\x6c\154\x2e\160\150\x70\x22\76\15\12\15\xa\40\x20\x3c\155\145\x74\x61\40\x6e\141\x6d\x65\75\x22\x76\x69\x65\167\x70\x6f\x72\x74\42\x20\143\x6f\156\x74\145\x6e\164\75\42\x77\x69\x64\164\x68\75\144\x65\x76\151\143\x65\x2d\167\x69\144\x74\150\x2c\x20\x69\x6e\151\x74\151\x61\154\55\163\143\x61\154\145\75\x31\x22\76\15\12\40\40\x3c\154\x69\156\x6b\x20\162\145\x6c\75\x22\x69\x63\x6f\156\x22\x20\164\171\x70\145\x3d\42\151\x6d\x61\x67\x65\57\170\x2d\151\143\157\x6e\x22\40\x68\x72\145\146\x3d\x2f\57\x63\144\156\56\x77\67\x2e\x63\x63\x2f\167\145\67\55\x69\x6e\x73\164\x61\154\x6c\x2f\146\141\x76\151\143\157\x6e\56\151\x63\157\x22\x3e\15\xa\x3c\154\x69\x6e\x6b\x20\162\x65\154\x3d\42\x73\164\171\x6c\145\x73\x68\x65\x65\x74\42\x20\x68\x72\x65\146\x3d\x22\57\x2f\143\144\x6e\x2e\167\x37\56\143\x63\57\167\x65\x37\55\151\x6e\x73\164\141\154\154\x2f\x73\x74\171\x6c\x65\163\x2e\x63\163\x73\x3f\x76\x3d" . time() . "\x22\76\74\x2f\x68\145\141\144\x3e\xd\xa\74\x62\x6f\x64\171\x3e\15\12\x20\40\74\x61\x70\160\55\x72\157\157\164\x3e\x3c\57\x61\160\x70\55\x72\x6f\157\164\76\15\xa\x3c\163\x63\162\151\160\x74\x20\x74\x79\160\145\x3d\42\x74\x65\170\x74\x2f\x6a\x61\x76\x61\163\143\x72\151\x70\164\42\40\163\x72\143\75\x22\57\x2f\x63\144\x6e\56\167\67\56\x63\143\x2f\167\145\67\55\151\156\163\164\141\x6c\x6c\x2f\162\165\x6e\164\x69\155\145\56\x6a\163\x3f\166\75" . time() . "\x22\76\x3c\57\163\x63\x72\x69\160\x74\x3e\74\163\x63\162\x69\x70\164\x20\164\171\160\145\x3d\x22\164\145\x78\164\57\152\141\166\141\163\143\162\x69\160\164\x22\x20\163\x72\143\x3d\x22\x2f\x2f\143\x64\156\56\167\x37\x2e\x63\143\x2f\x77\x65\x37\55\151\156\163\x74\141\x6c\x6c\x2f\x70\x6f\154\x79\146\x69\154\x6c\163\x2e\152\163\x3f\x76\75" . time() . "\42\x3e\x3c\x2f\163\x63\162\x69\160\x74\x3e\74\x73\143\x72\151\x70\164\40\164\x79\160\145\x3d\x22\164\x65\170\x74\x2f\152\x61\x76\141\163\x63\162\151\160\164\42\x20\163\162\x63\75\x22\57\x2f\143\x64\156\x2e\167\67\56\143\x63\x2f\167\x65\x37\x2d\x69\x6e\163\x74\x61\154\x6c\57\x6d\141\151\156\56\152\163\x3f\x76\x3d" . time() . "\42\x3e\74\57\163\143\162\151\x70\x74\x3e\74\x2f\142\x6f\x64\171\x3e\xd\12\x3c\x2f\x68\164\155\154\76"; goto gcK_I; eeXdl: A6IUI: goto dAdHF; w4EGy: if (empty($code)) { goto kw7Hd; } goto j5Ex1; hNTVm: $ret["\165\x70\x6c\157\141\x64"]["\146\x61\x69\154\145\144"] = true; goto WOEGj; xuqth: eGRte: goto PpmMD; Guwh_: touch(IA_INSTALL_ROOT . "\57\x64\x61\164\x61\57\144\142\x2e\x6c\x6f\x63\153"); goto MJTvz; iGPvs: exit(we7_error(400, "\xe8\xaf\267\351\207\215\xe6\226\260\347\231\xbb\xe5\275\225\56")); goto qiW9k; h6FBa: $auth = @json_decode(base64_decode($post), true); goto JhItE; fME66: zCQY7: goto Iy3Mt; wIEmT: function install_authcode($string, $operation = "\x44\105\x43\x4f\104\105", $key = '', $expiry = 0) { goto c1sa2; nf2Od: goto gSIWW; goto JUw20; lE0gA: if (!($i <= 255)) { goto E0FWf; } goto wUZ28; F7kcx: CwWdZ: goto jsWpE; Y4FMo: return ''; goto nf2Od; TWIsR: $j = ($j + $box[$i] + $rndkey[$i]) % 256; goto Q_24M; xQofv: if ((substr($result, 0, 10) == 0 || substr($result, 0, 10) - time() > 0) && substr($result, 10, 16) == substr(md5(substr($result, 26) . $keyb), 0, 16)) { goto dboyY; } goto Y4FMo; CpcVU: goto t0rks; goto hkTui; Affp9: $i++; goto CpcVU; Dza6Y: $box[$j] = $tmp; goto kmY6d; n1EKf: $j = $i = 0; goto ZNXGE; ADjcl: $a = $j = $i = 0; goto F7kcx; gf4Bq: goto Hznyo; goto Tt07_; kmY6d: LqM_z: goto NH5wT; kQw8H: if ($operation == "\104\105\103\x4f\x44\x45") { goto SnoYv; } goto xYKRR; hL5Zv: if (!($i < 256)) { goto FS8Q3; } goto TWIsR; Pcxqq: goto bjc5N; goto riDSK; lIGER: $rndkey = array(); goto Oe9fM; TW0Xm: $string = $operation == "\x44\105\x43\117\104\105" ? base64_decode(substr($string, $ckey_length)) : sprintf("\x25\60\61\60\144", $expiry ? $expiry + time() : 0) . substr(md5($string . $keyb), 0, 16) . $string; goto oYTZd; TYgy8: $j = ($j + $box[$a]) % 256; goto ebx7W; hkTui: E0FWf: goto n1EKf; NB6h2: Hznyo: goto ZkbGE; T2X5e: $box = range(0, 255); goto lIGER; rkCml: $box[$j] = $tmp; goto cYUZE; riDSK: FS8Q3: goto ADjcl; SLDrt: $result = ''; goto T2X5e; PPUwM: $box[$a] = $box[$j]; goto rkCml; Tt07_: SnoYv: goto xQofv; ZNXGE: bjc5N: goto hL5Zv; oYTZd: $string_length = strlen($string); goto SLDrt; LL6Li: $box[$i] = $box[$j]; goto Dza6Y; N1UdU: j_fKd: goto KQsGL; ebx7W: $tmp = $box[$a]; goto PPUwM; KLhyK: gSIWW: goto NB6h2; Mlfhg: $keyb = md5(substr($key, 16, 16)); goto HfksW; JUw20: dboyY: goto uX64o; jsWpE: if (!($i < $string_length)) { goto QnbRv; } goto GCjeN; GyoCw: goto CwWdZ; goto IOq3t; uX64o: return substr($result, 26); goto KLhyK; HfksW: $keyc = $ckey_length ? $operation == "\104\105\103\x4f\x44\x45" ? substr($string, 0, $ckey_length) : substr(md5(microtime()), -$ckey_length) : ''; goto VkEJu; IOq3t: QnbRv: goto kQw8H; c1sa2: $ckey_length = 4; goto x45o5; Gkx8M: s3JBt: goto Affp9; VkEJu: $cryptkey = $keya . md5($keya . $keyc); goto yua3L; Q_24M: $tmp = $box[$i]; goto LL6Li; x45o5: $key = md5($key != '' ? $key : $GLOBALS["\137\127"]["\x63\x6f\x6e\x66\151\147"]["\x73\145\164\164\151\x6e\x67"]["\141\x75\x74\x68\x6b\145\171"]); goto wwCfA; GCjeN: $a = ($a + 1) % 256; goto TYgy8; NH5wT: $i++; goto Pcxqq; xkvVp: t0rks: goto lE0gA; Oe9fM: $i = 0; goto xkvVp; wUZ28: $rndkey[$i] = ord($cryptkey[$i % $key_length]); goto Gkx8M; yua3L: $key_length = strlen($cryptkey); goto TW0Xm; wwCfA: $keya = md5(substr($key, 0, 16)); goto Mlfhg; xYKRR: return $keyc . str_replace("\x3d", '', base64_encode($result)); goto gf4Bq; cYUZE: $result .= chr(ord($string[$i]) ^ $box[($box[$a] + $box[$j]) % 256]); goto N1UdU; KQsGL: $i++; goto GyoCw; ZkbGE: } goto cEo1U; nbc5W: if (!($action == "\151\156\163\x74\x61\x6c\154")) { goto woCVq; } goto szWzs; NpmCw: $ret["\141\154\167\x61\x79\163\137\160\x6f\160\x75\154\141\164\x65\x5f\162\141\167\x5f\160\x6f\x73\164\137\144\141\164\141"]["\x68\141\156\x64\154\145"] = "\150\164\164\160\163\72\x2f\57\142\142\x73\x2e\167\x37\x2e\143\x63\x2f\164\150\x72\x65\141\x64\x2d\63\x33\61\x34\70\x2d\61\55\x31\x2e\150\164\155\154"; goto Zmd5d; zSvCe: exit(we7_error(400, "\xe8\x8e\267\345\217\x96\x61\x63\143\x65\163\x73\164\157\x6b\x65\x6e\xe5\xa4\261\xe8\xb4\245\357\xbc\214\350\xaf\267\351\207\215\xe6\x96\xb0\xe7\x99\xbb\345\275\x95\56")); goto QLS_3; RrSLA: if (empty($result)) { goto vNj5Y; } goto GS6JG; OBYqb: if (!(file_exists($filename) && !empty($filesize))) { goto PPg3Q; } goto kcMiF; DRCbA: header("\114\157\143\141\x74\151\157\x6e\x3a\x20" . $siteroot . "\x2f\x69\156\x73\164\141\x6c\x6c\56\x70\150\160"); goto y97b0; TIEIp: exit(we7_error(430, $register_site_result)); goto hNpp1; leisM: iwMSh: goto yZVVL; GvjIF: foreach ($ret as $key => $value) { goto cEpUg; rV4w9: $result[] = $value; goto E3hj_; e2XPe: goto c3nz0; goto Qii9p; Qii9p: R02_O: goto OBtXF; Kxx8D: c3nz0: goto L1mcZ; E3hj_: Odw8b: goto Kxx8D; iVScX: $value["\150\x61\156\144\x6c\x65"] = !empty($value["\150\141\156\144\154\x65"]) ? $value["\150\141\156\144\154\145"] : "\x68\164\x74\x70\x73\72\57\x2f\142\x62\x73\56\167\145\67\56\x63\143\57\164\x68\162\145\x61\144\55\63\65\66\64\x2d\x31\x2d\x31\x2e\x68\164\155\x6c"; goto rV4w9; cEpUg: if (!(version_compare(PHP_VERSION, "\x37\x2e\60\x2e\x30") >= 0 && in_array($key, array("\155\x63\x72\171\x70\x74", "\141\x6c\x77\x61\x79\163\137\160\157\x70\x75\154\x61\x74\x65\x5f\x72\141\167\x5f\160\157\x73\x74\137\144\x61\x74\x61")))) { goto R02_O; } goto e2XPe; OBtXF: if (!$value["\x66\141\151\x6c\145\144"]) { goto Odw8b; } goto iVScX; L1mcZ: } goto yii0E; Iy3Mt: if (file_exists(IA_INSTALL_ROOT . "\57\144\x61\164\x61\x2f\144\142\56\154\157\143\x6b")) { goto kODUz; } goto ws01u; NT77_: function we7_upgrade() { goto cPuXp; cUsw4: rmdirs($updatedir, true); goto Ff3WO; D0ovq: lpZ0t: goto BaFju; E5T2g: $packet = cloud_build(); goto TmgX2; f2Ecg: load()->func("\144\142"); goto K02dB; K02dB: load()->func("\146\151\154\x65"); goto E5T2g; uTFWb: if (!(!empty($packet["\x73\x63\162\x69\x70\164\x73"]) && is_array($packet["\163\x63\162\151\160\164\x73"]))) { goto suBdL; } goto Bi1Le; T3JAd: foreach ($updatefiles as $file) { goto ob2ob; ob2ob: if (!(!is_file($file) || !preg_match("\x2f\x5e\x75\160\x64\141\x74\x65\x5c\50\x5c\144\x7b\61\62\x7d\x5c\55\134\144\x7b\61\62\175\134\x29\x5c\56\160\150\x70\44\57", $file))) { goto r6tlj; } goto Fh405; y0on5: r6tlj: goto qbm1g; FA7il: @unlink($entry); goto Pt1NK; yqTn9: MuHPg: goto jfup9; PtpsP: cache_build_users_struct(); goto P_wyb; vwAHN: if (empty($evalret)) { goto OX174; } goto PtpsP; P_wyb: cache_build_setting(); goto FA7il; qbm1g: $evalret = (include $entry); goto vwAHN; Pt1NK: OX174: goto yqTn9; Fh405: goto MuHPg; goto y0on5; jfup9: } goto d1Aq7; kNz6G: require IA_INSTALL_ROOT . "\57\x66\x72\x61\x6d\x65\167\157\162\153\57\x62\157\x6f\164\163\x74\x72\x61\x70\56\151\156\x63\x2e\x70\150\x70"; goto Srrlr; niDjp: ikqLP: goto uTFWb; Bi1Le: $updatefiles = array(); goto Wo0gh; W0r0a: return true; goto dqpL4; BaFju: kO5Hl: goto Hc7Qg; AfFA0: $crelease = IMS_RELEASE_DATE; goto P2uTi; d1Aq7: KEd4s: goto Jlw1K; Ff3WO: mkdirs($updatedir); goto LosI0; wFQ6X: load()->model("\143\154\x6f\x75\x64"); goto f2Ecg; h4NWK: IMeET: goto niDjp; Wo0gh: $updatedir = IA_INSTALL_ROOT . "\x2f\x64\141\x74\x61\57\165\160\x64\x61\x74\x65\57"; goto cUsw4; Jlw1K: Jcf7Q: goto fHWF1; TmgX2: if (!empty($packet)) { goto QjWyb; } goto bqF9S; Srrlr: require IA_INSTALL_ROOT . "\57\167\145\x62\57\x63\x6f\155\x6d\157\156\57\142\157\x6f\164\x73\164\x72\x61\x70\x2e\x73\171\x73\56\151\x6e\143\x2e\x70\x68\160"; goto wFQ6X; BFhqF: define("\x49\x4e\x5f\123\x59\123", true); goto kNz6G; UnX8H: Zz02o: goto JvaXA; Hc7Qg: if (!(!empty($packet["\163\143\150\145\x6d\x61\x73"]) && is_array($packet["\x73\x63\x68\x65\x6d\x61\x73"]))) { goto ikqLP; } goto gd5XQ; fHWF1: suBdL: goto W0r0a; P2uTi: foreach ($packet["\163\x63\162\151\x70\x74\x73"] as $script) { goto Q_hjk; clUYo: OcdaC: goto uwbiL; A5GPg: goto OcdaC; goto Qjphj; DYOWm: file_put_contents($updatefile, $script["\x73\x63\162\x69\160\x74"]); goto TqvKK; WvtzB: $crelease = $script["\x72\x65\x6c\145\x61\x73\145"]; goto MuITV; oOnyC: vwpz3: goto gGbnK; Jl4Vi: if (!empty($script["\163\143\162\x69\x70\164"])) { goto vwpz3; } goto E_Xg4; E_Xg4: $script["\163\143\162\x69\x70\x74"] = <<<DAT
<?php
load()->model('setting');
setting_upgrade_version('{$packet["\x66\141\x6d\x69\x6c\171"]}', '{$script["\166\145\x72\x73\151\157\156"]}', '{$script["\x72\145\154\145\x61\x73\145"]}');
return true;
DAT;
goto oOnyC; TqvKK: $updatefiles[] = $updatefile; goto clUYo; Qjphj: T797W: goto NNKNf; NNKNf: $fname = "\x75\160\144\x61\x74\x65\x28{$crelease}\55{$script["\162\x65\154\x65\x61\x73\145"]}\x29\x2e\160\x68\x70"; goto WvtzB; Q_hjk: if (!($script["\162\x65\x6c\145\x61\163\145"] <= $crelease)) { goto T797W; } goto A5GPg; MuITV: $script["\163\143\x72\151\160\x74"] = @base64_decode($script["\x73\143\x72\151\160\x74"]); goto Jl4Vi; gGbnK: $updatefile = $updatedir . $fname; goto DYOWm; uwbiL: } goto UnX8H; JvaXA: if (empty($updatefiles)) { goto Jcf7Q; } goto T3JAd; LosI0: $cversion = IMS_VERSION; goto AfFA0; rL8OK: QjWyb: goto JH0ft; bqF9S: return true; goto rL8OK; cPuXp: global $_W; goto BFhqF; JOCp9: foreach ($packet["\x66\151\x6c\x65\x73"] as $file) { cloud_download($file, "\x66\x69\x6c\145\x73"); MZnTa: } goto D0ovq; gd5XQ: foreach ($packet["\163\143\150\x65\x6d\x61\x73"] as $schema) { goto bVnIJ; M8e1N: SNsCo: goto e9KpC; Nfx_5: Iga2O: goto M8e1N; bVnIJ: $tablename = substr($schema["\164\x61\x62\154\x65\x6e\x61\155\145"], 4); goto GMIQw; W0R_1: foreach ($sqls as $sql) { pdo_query($sql); js3YG: } goto Nfx_5; GcKYH: $sqls = db_table_fix_sql($local, $schema); goto W0R_1; GMIQw: $local = db_table_schema(pdo(), $tablename); goto GcKYH; e9KpC: } goto h4NWK; JH0ft: if (!(!empty($packet["\x66\151\x6c\145\163"]) && is_array($packet["\146\x69\x6c\145\x73"]))) { goto kO5Hl; } goto JOCp9; dqpL4: } goto vUMc_; IlKdJ: function we7_http_request($url, $post = array()) { goto PSExd; qa9mg: if ($errno || empty($data)) { goto E2Exs; } goto PXuVe; ZqTrA: E2Exs: goto qC7Cr; rzTde: Fh5zu: goto hfPHQ; qC7Cr: return array("\145\x72\162\x6e\157" => $errno, "\x65\x72\162\157\x72" => $error); goto rzTde; FCm6l: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); goto rUnZl; dww62: if (!$post) { goto pPDmQ; } goto U9qgu; YWxfG: curl_setopt($ch, CURLOPT_POSTFIELDS, $post); goto BmRz5; naZP6: $data = curl_exec($ch); goto PZX4g; GFHwq: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto TUReA; e2aiU: curl_close($ch); goto qa9mg; epC77: curl_setopt($ch, CURLOPT_TIMEOUT, 60); goto FCm6l; Y6EV3: goto Fh5zu; goto ZqTrA; rUnZl: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0); goto RgnNb; RgnNb: curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER["\110\x54\x54\120\x5f\x55\x53\x45\x52\x5f\101\107\x45\116\124"]); goto naZP6; U9qgu: curl_setopt($ch, CURLOPT_POST, 1); goto YWxfG; BmRz5: pPDmQ: goto p4Gsm; PZX4g: $errno = curl_errno($ch); goto hujj9; Bm32w: curl_setopt($ch, CURLOPT_HEADER, 1); goto dww62; TUReA: @curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); goto Bm32w; PSExd: $ch = curl_init(); goto IjX1t; p4Gsm: curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 60); goto epC77; IjX1t: curl_setopt($ch, CURLOPT_URL, $url); goto GFHwq; hujj9: $error = curl_error($ch); goto e2aiU; PXuVe: return we7_http_response_parse($data); goto Y6EV3; hfPHQ: } goto lBsn0; BhdtC: $sitepath = str_replace("\57\x69\x6e\x73\x74\141\154\154\56\160\x68\x70", '', $sitepath); goto jxAGS; E8jAU: $ret["\x61\x73\160\137\x74\x61\x67\x73"]["\x6f\x6b"] = ini_get("\141\163\160\x5f\x74\x61\147\x73"); goto ozI73; ocQW5: we7_finish(); goto s3sv6; zVJrl: header("\x63\x6f\156\x74\x65\x6e\x74\55\x74\x79\x70\145\72\40\x74\145\x78\x74\x2f\150\164\x6d\x6c\73\x20\x63\150\141\x72\x73\145\164\x3d\x75\164\146\55\x38"); goto DRJbW; nBapd: $ret["\146\x6f\x70\145\156"]["\157\x6b"] = @ini_get("\x61\154\x6c\x6f\167\x5f\165\x72\154\137\x66\x6f\160\x65\x6e") && function_exists("\146\x73\157\143\x6b\x6f\160\x65\x6e"); goto TmxWf; lBsn0: function we7_http_response_parse($data) { goto h7lz0; vNyH2: preg_match("\57\x5e\50\134\123\x2b\x29\x20\50\134\123\53\x29\40\50\x2e\52\51\x24\x2f", $split2[0], $matches); goto ideNY; zMT6F: $header = explode("\15\xa", $split2[1]); goto tA3aK; KIyJv: $rlt["\x6d\145\x74\x61"] = $data; goto XwOA2; l2hC5: $rlt["\163\x74\x61\164\165\163"] = !empty($matches[3]) ? $matches[3] : "\117\113"; goto jZBb0; D0jJI: $rlt["\143\x6f\156\164\x65\156\x74"] = gzdecode($rlt["\x63\157\x6e\x74\x65\x6e\164"]); goto HuJ38; t0foS: EA45A: goto lqRr9; HuJ38: o5M_c: goto KIyJv; AOzxz: mkCrg: goto m9vLu; JoKMP: foreach ($header as $v) { goto tfMpP; ym3lK: if (!empty($rlt["\150\145\x61\x64\145\162\163"][$key])) { goto QzEso; } goto X3Y2O; f1K0D: YG9O6: goto JaakB; DQfqH: $temp = $rlt["\150\x65\x61\x64\x65\162\x73"][$key]; goto W5hl2; HMjJF: $rlt["\x68\x65\141\144\x65\162\x73"][$key][] = $temp; goto ID9Lk; QKAy2: if (is_array($rlt["\x68\x65\x61\144\x65\162\163"][$key])) { goto YG9O6; } goto ym3lK; wCy82: $key = substr($v, 0, $pos); goto kGvT9; tfMpP: $pos = strpos($v, "\72"); goto wCy82; Flo43: $isgzip = true; goto hg3UO; Z2GCj: if (!(!$isgzip && strtolower($key) == "\x63\x6f\156\x74\145\156\x74\55\145\156\143\157\x64\151\x6e\x67" && strtolower($value) == "\x67\172\x69\x70")) { goto gZBV7; } goto Flo43; THYy0: Uq08c: goto Z2GCj; kGvT9: $value = trim(substr($v, $pos + 1)); goto QKAy2; JaakB: $rlt["\x68\x65\141\144\145\x72\x73"][$key][] = $value; goto cL1bQ; X3Y2O: $rlt["\x68\145\x61\x64\x65\x72\x73"][$key] = $value; goto lNAQX; cL1bQ: goto Uq08c; goto NyyfL; hg3UO: gZBV7: goto Z3A63; lNAQX: goto Uq08c; goto f1K0D; W5hl2: unset($rlt["\x68\x65\x61\144\x65\162\163"][$key]); goto HMjJF; ID9Lk: $rlt["\150\x65\141\144\x65\x72\x73"][$key][] = $value; goto THYy0; NyyfL: QzEso: goto DQfqH; Z3A63: g1vJl: goto TR5eq; TR5eq: } goto t0foS; qFXFJ: $split1[1] = substr($data, $pos + 4, strlen($data)); goto ZEOsA; ib12a: return we7_http_response_parse($rlt["\143\157\156\x74\145\156\x74"]); goto AOzxz; ZGGb7: $split1[0] = substr($data, 0, $pos); goto qFXFJ; ZEOsA: $split2 = explode("\xd\xa", $split1[0], 2); goto vNyH2; XfN7B: if (!($isgzip && function_exists("\x67\172\x64\x65\x63\x6f\144\145"))) { goto o5M_c; } goto D0jJI; m9vLu: return $rlt; goto wOZfM; jZBb0: $rlt["\x72\145\x73\x70\157\x6e\x73\145\154\151\156\145"] = !empty($split2[0]) ? $split2[0] : ''; goto zMT6F; lqRr9: $rlt["\x63\x6f\156\164\145\156\164"] = $split1[1]; goto XfN7B; ideNY: $rlt["\143\157\x64\145"] = !empty($matches[2]) ? $matches[2] : 200; goto l2hC5; T6yhZ: $pos = strpos($data, "\xd\xa\xd\12"); goto ZGGb7; XwOA2: if (!($rlt["\143\x6f\144\x65"] == "\61\60\60")) { goto mkCrg; } goto ib12a; tA3aK: $isgzip = false; goto JoKMP; h7lz0: $rlt = array(); goto T6yhZ; wOZfM: } goto BOxZc; gaPb7: sKmul: goto eTxhU; rbn3M: $result = array(); goto GvjIF; Yzzzo: mHbgJ: goto oQnOo; nH6xN: exit(we7_error(400, $data["\x65\162\162\157\162"])); goto ueZYw; u_rEe: $db_prefix = !empty($db_prefix) ? $db_prefix : "\x69\155\x73\x5f"; goto RUSVD; DkAHK: if ($ret["\x64\x61\164\x61"]["\x6f\x6b"]) { goto imMWc; } goto RaACR; PpmMD: $ret["\x64\141\x74\141"]["\157\153"] = local_writeable(IA_INSTALL_ROOT . "\x2f\144\x61\x74\141"); goto DkAHK; oFeCv: wnfcm: goto DpFE1; Rb4en: function we7_setcookie($key, $value) { goto YcrwI; wxe5J: if (!is_array($value)) { goto RdUaR; } goto Kn3HQ; YcrwI: $secure = $_SERVER["\x53\105\122\126\105\x52\137\120\117\x52\124"] == 443 ? 1 : 0; goto wxe5J; OE2Uk: RdUaR: goto E7Jrp; E7Jrp: return setcookie(COOKIE_PRE . $key, $value, 0, '', '', $secure, true); goto EfLQ_; Kn3HQ: $value = json_encode($value); goto OE2Uk; EfLQ_: } goto kPcRR; tPmdS: if (!(version_compare(PHP_VERSION, "\65\56\x33\x2e\60") == -1)) { goto S7ipf; } goto dXMlV; aCtGB: $ret["\x73\x65\x73\x73\x69\x6f\156"]["\156\141\x6d\x65"] = "\163\145\x73\163\151\157\x6e\x2e\141\165\x74\x6f\x5f\163\164\141\x72\164\345\xbc\x80\xe5\220\257"; goto L5whC; qiW9k: MOSHB: goto Mt0o7; gLUR_: if (!($handle_result !== true)) { goto U7SE4; } goto EJQTq; RUSVD: $database_result = we7_build_config($server, $db_username, $db_password, $db_name, $db_prefix); goto FrQ7h; wKOgl: $ret["\x64\157\155"]["\x72\145\x73\165\x6c\164"] = "\xe6\xb2\xa1\346\x9c\211\345\220\xaf\347\x94\xa8\x44\x4f\x4d\x44\157\143\165\x6d\145\156\x74"; goto cYH5_; DF0jR: $server["\x75\160\154\x6f\141\144"] = strtolower($server["\x75\160\154\157\141\x64"]); goto NU71r; yii0E: GpDwv: goto RrSLA; GFM1n: exit(we7_error(0, "\x73\x75\143\143\145\163\x73")); goto NAs3G; UXmH4: define("\103\117\x4f\113\x49\x45\137\120\122\105", "\167\145\x37\151\156\x73\164\141\154\x6c\x5f"); goto ygTJ0; TIjG6: $user_result = we7_update_user($username, $password); goto IT8xB; h95jA: goto sKmul; goto Lak77; BGiWl: $action = "\157\x61\165\x74\150"; goto S1nOw; mh0EB: woCVq: goto sr5bf; zAX5L: function we7_build_config($server, $db_username, $db_password, $db_name, $db_prefix) { goto Py7Cr; Hl53M: $db = array("\x73\145\x72\166\145\x72" => $pieces[0], "\160\x6f\x72\x74" => !empty($pieces[1]) ? $pieces[1] : "\x33\x33\60\66", "\x75\x73\x65\162\x6e\141\155\x65" => $db_username, "\160\141\x73\x73\x77\157\162\144" => $db_password, "\x70\162\145\x66\151\170" => $db_prefix, "\x6e\141\155\x65" => $db_name); goto vYUXc; ZgT0T: $result = file_put_contents(IA_INSTALL_ROOT . "\57\x64\141\164\141\x2f\x63\x6f\156\146\151\147\56\160\150\160", $config); goto oCdpv; hYtBR: local_mkdirs(IA_INSTALL_ROOT . "\x2f\x64\x61\x74\141"); goto ZgT0T; DN7nv: return false; goto v3rsz; M61lB: $config = str_replace(array("\173\144\x62\x2d\x73\x65\x72\x76\145\162\x7d", "\x7b\144\142\x2d\x75\x73\145\162\156\x61\x6d\145\x7d", "\173\x64\142\55\160\141\x73\x73\x77\157\x72\x64\x7d", "\173\144\142\x2d\160\157\x72\x74\x7d", "\x7b\x64\x62\x2d\x6e\x61\x6d\145\x7d", "\x7b\144\142\55\164\x61\x62\154\x65\160\x72\145\175", "\x7b\x63\x6f\x6f\153\x69\145\160\x72\x65\175", "\x7b\x61\165\164\150\153\145\171\175", "\173\141\x74\x74\141\x63\150\x64\151\x72\x7d"), array($db["\163\145\x72\166\145\162"], $db["\165\x73\145\x72\156\x61\155\145"], $db["\x70\x61\x73\163\167\x6f\162\x64"], $db["\160\x6f\162\x74"], $db["\156\x61\x6d\145"], $db["\160\162\145\x66\x69\170"], $cookiepre, $authkey, "\141\x74\164\141\x63\x68\x6d\x65\156\x74"), $config); goto hYtBR; Py7Cr: if (!(empty($server) || empty($db_username) || empty($db_password) || empty($db_name))) { goto I1qIV; } goto DN7nv; Yw16c: $pieces = explode("\x3a", $server); goto Hl53M; lkGbi: $link->exec("\125\x53\x45\x20{$db["\x6e\141\155\145"]}"); goto bMkPU; NLngu: Jk7LM: goto mJIIH; sGWgC: return $error; goto cnQQ8; jAF3J: return "\xe6\202\xa8\347\x9a\x84\346\x95\xb0\346\215\256\345\272\x93\xe4\xb8\x8d\xe4\270\xba\xe7\251\272\357\xbc\214\350\xaf\267\xe9\207\x8d\346\226\260\xe5\273\xba\347\253\213\xe6\225\xb0\346\x8d\xae\xe5\xba\x93\346\210\226\346\x98\257\346\xb8\x85\xe7\xa9\272\xe8\257\245\xe6\x95\xb0\xe6\x8d\xae\xe5\xba\223\xe6\210\x96\xe6\233\xb4\xe6\224\271\xe8\241\250\345\x89\x8d\xe7\xbc\x80\357\274\201"; goto NLngu; oCdpv: return $result !== false ? true : false; goto HFUnh; pS0ar: $authkey = local_salt(8); goto M61lB; LKOoW: $cookiepre = local_salt(4) . "\137"; goto pS0ar; deZ65: if (!$statement->fetch()) { goto Jk7LM; } goto jAF3J; mJIIH: $config = local_config(); goto LKOoW; v3rsz: I1qIV: goto Yw16c; eG4g_: if (empty($error)) { goto iFwFs; } goto sGWgC; bMkPU: $statement = $link->query("\123\110\117\127\x20\x54\101\x42\x4c\x45\x53\x20\114\111\113\x45\40\x27{$db["\x70\x72\x65\x66\x69\170"]}\45\47\73"); goto deZ65; cnQQ8: iFwFs: goto lkGbi; vYUXc: try { goto tLScO; KVIf1: Xdq4m: goto WDeQF; KRH6K: XSCmM: goto e9NJX; WDeQF: goto cn9Hd; goto P6fuK; tnvGI: yogQg: goto Z0fnP; gL4iY: $error = $errorInfo[2]; goto u6jF1; zO1S3: if (!($link->errorCode() != "\60\x30\60\60\x30")) { goto Xdq4m; } goto j8jxf; o2hoG: $link->exec("\123\105\124\x20\143\x68\x61\162\x61\x63\x74\145\x72\137\163\x65\x74\x5f\x63\157\x6e\156\x65\x63\164\151\x6f\156\75\x75\x74\146\70\54\x20\143\150\141\162\141\x63\x74\x65\162\x5f\x73\145\x74\137\162\x65\x73\x75\x6c\164\x73\75\x75\164\146\70\x2c\x20\143\150\141\162\x61\x63\164\145\162\x5f\x73\145\164\x5f\x63\x6c\151\x65\156\164\x3d\x62\151\x6e\x61\x72\171"); goto Vhswh; zwTOp: $error .= "\346\225\xb0\346\x8d\xae\345\272\223\344\xb8\215\345\255\230\xe5\234\xa8\344\270\224\345\x88\233\345\xbb\xba\346\225\xb0\xe6\215\xae\345\xba\x93\xe5\244\261\xe8\xb4\245\x2e"; goto CIPym; G6ht2: if (substr($link->getAttribute(PDO::ATTR_SERVER_VERSION), 0, 3) > "\64\x2e\x31") { goto XSCmM; } goto XaVa7; X_7FI: $statement = $link->query("\123\x48\x4f\x57\x20\104\101\x54\101\102\x41\x53\105\x53\40\x4c\111\113\x45\40\47{$db["\x6e\x61\155\145"]}\x27\x3b"); goto idvOL; XII33: $errorInfo = $link->errorInfo(); goto gL4iY; GJ_hn: $error .= $errorInfo[2]; goto KVIf1; u6jF1: cn9Hd: goto HYnTb; j8jxf: $errorInfo = $link->errorInfo(); goto GJ_hn; CIPym: BApNN: goto zO1S3; Z0fnP: reklt: goto X_7FI; XaVa7: $link->query("\103\122\105\x41\124\105\x20\104\101\124\101\x42\x41\x53\105\40\111\x46\x20\116\x4f\x54\40\105\x58\x49\123\x54\x53\40\140{$db["\156\x61\x6d\145"]}\x60"); goto zmP78; ETP7I: if (!empty($fetch)) { goto reklt; } goto G6ht2; Vhswh: $link->exec("\x53\105\x54\40\163\x71\154\x5f\155\x6f\x64\x65\75\47\47"); goto r5_7y; r5_7y: if ($link->errorCode() != "\x30\x30\60\x30\x30") { goto xHEC5; } goto QU8rE; idvOL: $fetch = $statement->fetch(); goto cI7pS; e9NJX: $link->query("\x43\122\x45\x41\x54\x45\x20\104\x41\124\x41\x42\x41\x53\x45\40\x49\x46\x20\x4e\x4f\x54\40\105\130\111\123\124\x53\x20\140{$db["\156\x61\155\x65"]}\140\x20\104\x45\106\101\x55\114\x54\x20\103\110\x41\x52\101\x43\124\x45\122\40\123\x45\x54\x20\x75\164\146\x38"); goto tnvGI; tLScO: $link = new PDO("\155\171\163\x71\154\x3a\150\x6f\x73\164\75{$db["\x73\x65\x72\166\x65\162"]}\73\x70\x6f\x72\x74\x3d{$db["\x70\x6f\162\164"]}", $db["\165\x73\x65\x72\156\x61\x6d\145"], $db["\160\x61\x73\163\167\157\162\x64"]); goto o2hoG; P6fuK: xHEC5: goto XII33; QU8rE: $statement = $link->query("\x53\110\x4f\127\40\x44\101\x54\x41\x42\x41\x53\x45\x53\x20\x4c\x49\x4b\x45\40\47{$db["\x6e\141\155\x65"]}\x27\x3b"); goto jcK20; zmP78: goto yogQg; goto KRH6K; cI7pS: if (!empty($fetch)) { goto BApNN; } goto zwTOp; jcK20: $fetch = $statement->fetch(); goto ETP7I; HYnTb: } catch (PDOException $e) { goto Udhw9; vgEGb: $error = "\xe6\x82\xa8\xe7\232\x84\346\225\260\xe6\215\xae\xe5\272\223\350\xae\xbf\351\227\256\347\224\xa8\xe6\x88\267\xe5\x90\215\xe6\x88\x96\346\x98\xaf\xe5\257\x86\347\xa0\x81\xe9\x94\x99\xe8\xaf\257\x2e"; goto ZnD5M; l43js: $error = iconv("\147\142\153", "\165\164\146\x38", $error); goto gu8n9; Udhw9: $error = $e->getMessage(); goto n9K9H; n9K9H: if (strpos($error, "\x41\143\143\x65\x73\x73\x20\x64\x65\156\x69\145\144\40\146\157\x72\x20\165\163\145\162") !== false) { goto U1u8Q; } goto l43js; rjf41: U1u8Q: goto vgEGb; gu8n9: goto eo541; goto rjf41; ZnD5M: eo541: goto anks2; anks2: } goto eG4g_; HFUnh: } goto YI3eK; k0GJs: if ($ret["\x64\157\155"]["\x6f\x6b"]) { goto MjTUk; } goto klaOj; iUPdl: $result = file_put_contents("\x2e\x2f\143\150\165\156\153\137" . $chunk_num, $data); goto ZBLaZ; p4lVe: exit(we7_error(433, "\x61\x63\x63\x65\163\163\164\x6f\153\x65\156\x20\145\170\160\151\162\x65\144\56")); goto hk0Sc; FbODO: if ($sitename_result) { goto HDt3U; } goto OY3K0; y_V21: vNj5Y: goto GFM1n; ZpO1h: tkjuf: goto weloR; kPcRR: function we7_getcookie($key) { goto h5b1d; VsaGn: $key = COOKIE_PRE . $key; goto O_IOv; WoXeb: Jpifu: goto VsaGn; c2Eww: return ''; goto WoXeb; O_IOv: return $_COOKIE[$key]; goto sDHtM; h5b1d: if (!empty($key)) { goto Jpifu; } goto c2Eww; sDHtM: }